{"version":3,"sources":["redux/reducers.js","components/Register.jsx","components/Login.jsx","components/Destination.jsx","components/FolllowedDestinations.jsx","components/DisplayGuest.jsx","components/DestinationAdmin.jsx","components/DisplayAdmin.jsx","components/AddEditFormAdmin.jsx","components/Header.jsx","components/Statistics.jsx","App.js","index.js"],"names":["initialStateOfUser","Register","history","useHistory","useState","name","setName","surname","setSurname","username","setUsername","password","setPassword","role","user","setUser","register","err","a","fetch","method","headers","body","JSON","stringify","res","json","data","msg","push","console","log","className","TextField","required","id","label","onChange","e","target","value","Button","onClick","variant","color","to","Login","dispatch","useDispatch","isMountedRef","useRef","useEffect","localStorage","signIn","loggedIn","current","signedUser","login","type","payload","access_token","setItem","signedInUser","parse","getItem","refresh_token","useStyles","makeStyles","root","maxWidth","minWidth","media","height","Destination","setHandleChange","image","price","startsFrom","endsAt","followers","moreInfo","myDestinations","classes","isLogged","useSelector","state","followMeFunction","userId","destinationId","storedToken","removeItem","refreshedUser","followedDestinations","Card","CardActionArea","CardMedia","title","CardContent","Typography","gutterBottom","component","CardActions","popupId","popupState","bindTrigger","Popover","bindPopover","anchorOrigin","vertical","horizontal","transformOrigin","Box","p","FolllowedDestinations","destination_id","followMe","unfollowMeFunction","theme","flexGrow","card","padding","spacing","textAlign","palette","text","secondary","DisplayGuest","destinations","setDestinations","setMyDestinations","handleChange","undefined","location","isMounted","displayDestinations","setTimeout","displayFollowedDestinations","toUpperCase","length","map","mydestination","starts_from","ends_at","more_info","destination","DestinationAdmin","deleteDestination","size","DisplayAdmin","AddEditFormAdmin","setImage","setPrice","setStartsFrom","setEndsAt","setFollowers","setMoreInfo","addDestination","newDestination","editDestination","updatedDestination","disabled","Header","logout","src","alt","Statistics","setFollowedDestinations","followedDestinationsStatistics","sortedFollowedDestinations","sort","b","domainPadding","width","style","paddingLeft","fill","x","y","App","path","exact","from","allReducers","combineReducers","action","sur_name","signedIn","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","document","getElementById"],"mappings":"0WACIA,EAAqB,G,0FCMV,SAASC,IAEpB,IAAMC,EAAUC,cAFe,EAIPC,mBAAS,IAJF,mBAIxBC,EAJwB,KAIlBC,EAJkB,OAKDF,mBAAS,IALR,mBAKxBG,EALwB,KAKfC,EALe,OAMCJ,mBAAS,IANV,mBAMxBK,EANwB,KAMdC,EANc,OAOCN,mBAAS,IAPV,mBAOxBO,EAPwB,KAOdC,EAPc,OAQPR,mBAAS,IARF,mBAQxBS,EARwB,aASPT,sBATO,mBASxBU,EATwB,KASlBC,EATkB,KAYzBC,EAAQ,uCAAG,WAAOC,GAAP,iBAAAC,EAAA,+EAGSC,MAAM,sCAAuC,CAC3DC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEnB,OAAME,UAASE,WAAUE,WAAUE,WANrD,cAGHY,EAHG,gBAQUA,EAAIC,OARd,QAQHC,EARG,QASCC,IAGNb,EAAQY,GAFRzB,EAAQ2B,KAAK,KAVR,kDAeTd,EAAQ,EAAD,IACPe,QAAQC,IAAR,KAAiB,KAAIH,KAhBZ,0DAAH,sDAoBd,OACA,qBAAKI,UAAU,WAAf,SACI,sBAAKA,UAAU,gBAAf,UACI,cAACC,EAAA,EAAD,CAAWC,UAAQ,EAACC,GAAG,sBACnBC,MAAM,OAAOC,SAAU,SAAAC,GAAC,OAAIhC,EAAQgC,EAAEC,OAAOC,QAAQA,MAAOnC,IAChE,cAAC4B,EAAA,EAAD,CAAWC,UAAQ,EAACC,GAAG,sBACnBC,MAAM,UAAUC,SAAU,SAAAC,GAAC,OAAI9B,EAAW8B,EAAEC,OAAOC,QAAQA,MAAOjC,IACtE,cAAC0B,EAAA,EAAD,CAAWC,UAAQ,EAACC,GAAG,sBACnBC,MAAM,WAAWC,SAAU,SAAAC,GAAC,OAAI5B,EAAY4B,EAAEC,OAAOC,QAAQA,MAAO/B,IACxE,cAACwB,EAAA,EAAD,CAAWC,UAAQ,EAACC,GAAG,sBACnBC,MAAM,WAAWC,SAAU,SAAAC,GAAC,OAAI1B,EAAY0B,EAAEC,OAAOC,QAAQA,MAAO7B,IACpE,qBAAKqB,UAAU,iBACnB,cAACS,EAAA,EAAD,CAAQC,QAAS1B,EAAU2B,QAAQ,YAAYC,MAAM,UAAUZ,UAAU,aAAzE,sBAGI,qBAAKA,UAAU,QAAf,SACClB,EAAO,6BAAKA,EAAKc,MAAY,KAE9B,qBAAKI,UAAU,QAAf,SACJ,mEAAqC,cAAC,IAAD,CAAMa,GAAG,SAAT,kBAArC,c,OCnDG,SAASC,IAEpB,IAAMC,EAAWC,cACX9C,EAAUC,cAHY,EAIIC,mBAAS,IAJb,mBAIrBK,EAJqB,KAIXC,EAJW,OAKIN,mBAAS,IALb,mBAKrBO,EALqB,KAKXC,EALW,OAMJR,mBAAS,IANL,mBAMrBU,EANqB,KAMfC,EANe,KAOtBkC,EAAeC,kBAAO,GAC5BC,qBAAU,WACFC,aAAaC,SACbC,IACAL,EAAaM,SAAQ,KAE1B,IAEH,IAAIC,EAAa,GACXC,EAAK,uCAAG,8BAAAvC,EAAA,+EAEYC,MAAM,mCAAoC,CACxDC,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEf,WAAUE,eAL/B,cAEAc,EAFA,gBAOaA,EAAIC,OAPjB,OAOAC,EAPA,OAQNG,QAAQC,IAAIJ,GACZ6B,EAAa7B,EAAK,GAClBG,QAAQC,IAAIyB,GACZT,EAAS,CACLW,KAAM,SAAUC,QAAShC,EAAK,KAG9B6B,EAAWI,cAAoC,UAApBJ,EAAW3C,MACtCuC,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUgC,IAC9CtD,EAAQ2B,KAAK,gBAAiB,CAAEf,KAAM0C,KAC/BA,EAAWI,cAAoC,UAApBJ,EAAW3C,MAC7CuC,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUgC,IAC9CtD,EAAQ2B,KAAK,gBAAiB,CAAEf,KAAM0C,KAEtCzC,EAAQY,GAtBN,kDAyBNG,QAAQC,IAAR,KAAiB,KAAIH,KAzBf,QA2BVE,QAAQC,IAAIyB,GA3BF,0DAAH,qDA8BLF,EAAQ,uCAAG,gCAAApC,EAAA,6DACP4C,EAAevC,KAAKwC,MAAMX,aAAaY,QAAQ,WADxC,kBAIS7C,MAAM,qCAAuC2C,EAAa3B,GAAI,CAC5Ed,QAAS,CAAE,iBAAkByC,EAAaF,aAAc,cAAiBE,EAAaG,iBALjF,cAIHxC,EAJG,gBAOUA,EAAIC,OAPd,OAOHC,EAPG,OAQTZ,EAAQY,EAAK,IACboB,EAAS,CACLW,KAAM,SAAUC,QAAShC,EAAK,KAElC6B,EAAa7B,EAAK,GAClBG,QAAQC,IAAIyB,GACRA,EAAWI,cAAoC,UAApBJ,EAAW3C,MACtCX,EAAQ2B,KAAK,gBAAiB,CAAEf,KAAM0C,IACtCJ,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUgC,KACvCA,EAAWI,cAAoC,UAApBJ,EAAW3C,MAC7CX,EAAQ2B,KAAK,gBAAiB,CAAEf,KAAM0C,IACtCJ,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUgC,KAE9CzC,EAAQY,GArBH,kDAwBTG,QAAQC,IAAR,KAAiB,KAAIH,KAxBZ,0DAAH,qDA6Bd,OACI,qBAAKI,UAAU,QAAf,SACI,sBAAKA,UAAU,aAAf,UAEI,cAACC,EAAA,EAAD,CAAWC,UAAQ,EAACC,GAAG,sBACnBC,MAAM,WAAWC,SAAU,SAAAC,GAAC,OAAI5B,EAAY4B,EAAEC,OAAOC,QAAQA,MAAO/B,IACxE,cAACwB,EAAA,EAAD,CAAWC,UAAQ,EAACC,GAAG,sBACnBC,MAAM,WAAWC,SAAU,SAAAC,GAAC,OAAI1B,EAAY0B,EAAEC,OAAOC,QAAQA,MAAO7B,IACxE,qBAAKqB,UAAU,YAAf,SACI,cAACS,EAAA,EAAD,CAAQC,QAASe,EAAOd,QAAQ,YAAYC,MAAM,UAAlD,qBAIH9B,EAAO,6BAAKA,EAAKc,MAAY,GAC9B,oEAAsC,cAAC,IAAD,CAAMiB,GAAG,YAAT,oC,sGCjFhDqB,EAAYC,YAAW,CAC3BC,KAAM,CACJC,SAAU,IAAKC,SAAU,KAE3BC,MAAO,CACLC,OAAQ,OAKG,SAASC,EAAT,GAAoI,IAA7GC,EAA4G,EAA5GA,gBAAiBvC,EAA2F,EAA3FA,GAAIwC,EAAuF,EAAvFA,MAAOtE,EAAgF,EAAhFA,KAAMuE,EAA0E,EAA1EA,MAAOC,EAAmE,EAAnEA,WAAYC,EAAuD,EAAvDA,OAAQC,EAA+C,EAA/CA,UAAWC,EAAoC,EAApCA,SAAyB9E,GAAW,EAA1B+E,eAA0B,EAAX/E,SAC/HgF,EAAUhB,IAEViB,EAAWC,aAAY,SAAAC,GAAK,OAAIA,EAAMF,YACtCpC,EAAWC,cAOXsC,EAAgB,uCAAG,WAAOnD,GAAP,mCAAAjB,EAAA,6DACjBqE,EAASJ,EAAShD,GAClBqD,EAAgBrD,EAElB2B,EAAevC,KAAKwC,MAAMX,aAAaY,QAAQ,WACnDlC,QAAQC,IAAI+B,GALW,kBAOH3C,MAAM,yCAA0C,CAChEC,OAAQ,OACRC,QAAS,CAAE,eAAgB,mBAAoB,iBAAkByC,EAAaF,aAAc,cAAiBE,EAAaG,eAC1H3C,KAAMC,KAAKC,UAAU,CAAEgE,gBAAeb,QAAOtE,OAAMuE,QAAOC,aAAYC,SAAQC,YAAWC,WAAUO,aAVhF,cAOf9D,EAPe,iBAYFA,EAAIC,OAZF,WAaR,mBADPC,EAZe,0CAeX8D,EAAclE,KAAKwC,MAAMX,aAAaY,QAAQ,WACpDZ,aAAasC,WAAW,UAhBP,UAiBCvE,MAAM,oCAAqC,CAC3DC,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEiE,kBApBR,eAiBXhE,EAjBW,iBAsBEA,EAAIC,OAtBN,QAsBXC,EAtBW,OAuBjBoB,EAAS,CAAEW,KAAM,UAAWC,QAAShC,IACrCzB,EAAQ2B,KAAK,UAxBI,mDA0BjBC,QAAQC,IAAR,KAAiB,KAAIH,KA1BJ,oCA4BVD,EAAKgE,cA5BK,wBA6BnBvC,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUG,EAAKgE,gBAC/CA,EAAgBpE,KAAKwC,MAAMX,aAAaY,QAAQ,WACpDlC,QAAQC,IAAI4D,GA/BO,oBAiCCxE,MAAM,yCAA0C,CAChEC,OAAQ,OACRC,QAAS,CAAE,eAAgB,mBAAoB,iBAAkBsE,EAAc/B,aAAc,cAAiB+B,EAAc1B,eAC5H3C,KAAMC,KAAKC,UAAU,CAAEgE,gBAAeb,QAAOtE,OAAMuE,QAAOC,aAAYC,SAAQC,YAAWC,WAAUO,aApCpF,eAiCX9D,EAjCW,iBAsCEA,EAAIC,OAtCN,QAsCXC,EAtCW,OAuCjBG,QAAQC,IAAIJ,GACZoB,EAAS,CACPW,KAAM,SAAUC,QAAShC,IAE3B+C,EAAgB/C,EAAKiE,sBACrBxC,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUmE,IA5C7B,mDA8CjB7D,QAAQC,IAAR,KAAiB,KAAIH,KA9CJ,gCAiDnBmB,EAAS,CACPW,KAAM,SAAUC,QAAShC,IAE3B+C,EAAgB/C,EAAKiE,sBACrBxC,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUsC,IArD3B,0DAwDrBhC,QAAQC,IAAR,KAAiB,KAAIH,KAxDA,0EAAH,sDAiEtB,OACE,qBAAKI,UAAU,OAAf,SACE,eAAC6D,EAAA,EAAD,CAAM7D,UAAWkD,EAAQd,KAAzB,UACE,eAAC0B,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CACE/D,UAAWkD,EAAQX,MACnBI,MAAOA,EACPqB,MAAO3F,IAET,eAAC4F,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,SACG/F,IAEH,eAAC6F,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,oBACUxB,KAEV,eAACsB,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,wBACcvB,KAEd,eAACqB,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,qBACWtB,KAEX,eAACoB,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,wBACcrB,WAIlB,eAACsB,EAAA,EAAD,WACE,cAAC,IAAD,CAAY1D,QAAQ,UAAU2D,QAAQ,qBAAtC,SACG,SAACC,GAAD,OACC,gCACE,cAAC9D,EAAA,EAAD,yBAAQE,QAAQ,YAAYC,MAAM,WAAc4D,sBAAYD,IAA5D,4BAGA,cAACE,EAAA,EAAD,2BACMC,sBAAYH,IADlB,IAEEI,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,UARhB,SAWE,cAACE,EAAA,EAAD,CAAKC,EAAG,EAAR,SACE,eAACd,EAAA,EAAD,WAAalB,EAAb,kBAMV,cAACvC,EAAA,EAAD,CAAQC,QAAS,SAAAJ,GAAC,OAAIgD,EAAiBnD,IAAKQ,QAAQ,YAAYC,MAAM,UAAtE,+BC3IV,IAAMsB,EAAYC,YAAW,CAC3BC,KAAM,CACJC,SAAU,IAAKC,SAAU,KAE3BC,MAAO,CACLC,OAAQ,OAIG,SAASyC,EAAT,GAA8I,IAA7GvC,EAA4G,EAA5GA,gBAAiBvC,EAA2F,EAA3FA,GAAI+E,EAAuF,EAAvFA,eAAgBvC,EAAuE,EAAvEA,MAAOtE,EAAgE,EAAhEA,KAAMuE,EAA0D,EAA1DA,MAAOC,EAAmD,EAAnDA,WAAYC,EAAuC,EAAvCA,OAAQC,EAA+B,EAA/BA,UAAWC,EAAoB,EAApBA,SAAS9E,EAAW,EAAXA,QAC/I4B,QAAQC,IAAII,GACZ,IAAM+C,EAAUhB,IAIVnB,GAFYqC,aAAY,SAAAC,GAAK,OAAIA,EAAMF,YAC3BC,aAAY,SAAAC,GAAK,OAAIA,EAAM8B,YAC5BnE,eAIXoE,EAAkB,uCAAG,4CAAAlG,EAAA,6DACnB4C,EAAevC,KAAKwC,MAAMX,aAAaY,QAAQ,WAD5B,kBAGL7C,MAAM,mCAAqC2C,EAAa3B,GAAI,CAC5Ef,OAAQ,SACRC,QAAS,CAAE,eAAgB,mBAAoB,iBAAkByC,EAAaF,aAAc,cAAiBE,EAAaG,eAC1H3C,KAAMC,KAAKC,UAAU,CAAEW,KAAI+E,qBANN,cAGjBzF,EAHiB,gBASJA,EAAIC,OATA,UAUV,mBADPC,EATiB,yCAYb8D,EAAclE,KAAKwC,MAAMX,aAAaY,QAAQ,WACpDZ,aAAasC,WAAW,UAbL,UAcDvE,MAAM,oCAAqC,CAC3DC,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEiE,kBAjBN,eAcbhE,EAda,iBAmBAA,EAAIC,OAnBJ,QAmBbC,EAnBa,OAoBnBoB,EAAS,CAAEW,KAAM,UAAWC,QAAShC,IACrCzB,EAAQ2B,KAAK,UArBM,kDAuBnBC,QAAQC,IAAR,KAAiB,KAAIH,KAvBF,oCAyBZD,EAAKgE,cAzBO,wBA0BrB7D,QAAQC,IAAI,iBACZqB,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUG,EAAKgE,gBAC/CA,EAAgBpE,KAAKwC,MAAMX,aAAaY,QAAQ,WACpDlC,QAAQC,IAAI4D,GA7BS,oBA+BDxE,MAAM,mCAAqCwE,EAAcxD,GAAI,CAC7Ef,OAAQ,SACRC,QAAS,CAAE,eAAgB,mBAAoB,iBAAkBsE,EAAc/B,aAAc,cAAiB+B,EAAc1B,eAC5H3C,KAAMC,KAAKC,UAAU,CAAEW,KAAI+E,qBAlCV,eA+BbzF,EA/Ba,iBAqCAA,EAAIC,OArCJ,QAqCbC,EArCa,OAsCnBG,QAAQC,IAAIJ,GACZoB,EAAS,CACPW,KAAM,SAAUC,QAAShC,IAE3B+C,EAAgB/C,EAAKiE,sBACrBxC,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUmE,IA3C3B,mDA6CnB7D,QAAQC,IAAR,KAAiB,KAAIH,KA7CF,gCAgDrBmB,EAAS,CACPW,KAAM,SAAUC,QAAShC,IAE3B+C,EAAgB/C,EAAKiE,sBACrBxC,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUsC,IApDzB,0DAuDvBhC,QAAQC,IAAR,KAAiB,KAAIH,KAvDE,yEAAH,qDA0DxB,OACE,qBAAKI,UAAU,gBAAf,SACE,eAAC6D,EAAA,EAAD,CAAM7D,UAAWkD,EAAQd,KAAzB,UACE,eAAC0B,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CACE/D,UAAWkD,EAAQX,MACnBI,MAAOA,EACPqB,MAAO3F,IAET,eAAC4F,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,SACG/F,IAEH,eAAC6F,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,oBACUxB,KAEV,eAACsB,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,wBACcvB,KAEd,eAACqB,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,qBACWtB,KAEX,eAACoB,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,sBACYrB,WAIhB,eAACsB,EAAA,EAAD,WACE,cAAC,IAAD,CAAY1D,QAAQ,UAAU2D,QAAQ,qBAAtC,SACG,SAACC,GAAD,OACC,gCACE,cAAC9D,EAAA,EAAD,yBAAQE,QAAQ,YAAYC,MAAM,WAAc4D,sBAAYD,IAA5D,4BAGA,cAACE,EAAA,EAAD,2BACMC,sBAAYH,IADlB,IAEEI,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,UARhB,SAWE,cAACE,EAAA,EAAD,CAAKC,EAAG,EAAR,SACE,eAACd,EAAA,EAAD,WAAalB,EAAb,kBAMV,cAACvC,EAAA,EAAD,CAAQC,QAAS,SAAAJ,GAAC,OAAI8E,EAAmBjF,IAAKQ,QAAQ,YAAYC,MAAM,UAAxE,iC,WCvIJsB,EAAYC,aAAW,SAACkD,GAAD,MAAY,CACrCjD,KAAM,CACFkD,SAAU,GAEdC,KAAM,CACFC,QAASH,EAAMI,QAAQ,GACvBC,UAAW,SACX9E,MAAOyE,EAAMM,QAAQC,KAAKC,eAGnB,SAASC,EAAT,GAAoC,IAAZ5H,EAAW,EAAXA,QAE7BgF,EAAUhB,IACZ3C,KAAKwC,MAAyC,OAAnCX,aAAaY,QAAQ,WAA0E,UAApDzC,KAAKwC,MAAMX,aAAaY,QAAQ,WAAWnD,OAAmBX,EAAQ2B,KAAK,UAHvF,MAKNzB,mBAAS,IALH,mBAKvC2H,EALuC,KAKzBC,EALyB,OAMF5H,mBAAS,IANP,mBAMvC6E,EANuC,KAMvBgD,EANuB,OAON7H,mBAAS,IAPH,mBAOvC8H,EAPuC,KAOzBxD,EAPyB,KAQxC3B,EAAWC,cACXmC,EAAWC,aAAY,SAAAC,GAAK,OAAIA,EAAMF,YACxCrE,OAAkCqH,IAA3BjI,EAAQkI,SAAS/C,MAAsB,GAAMnF,EAAQkI,SAAS/C,MAAMvE,KAE1EqE,EAAShD,IAAIjC,EAAQ2B,KAAK,UAC/BsB,qBAAU,WACL,IAAIkF,GAAY,EAQhB,OAPIA,IACDC,IACAC,YAAW,WACPC,MACD,KAGC,WAAQH,GAAY,KAC9B,CAACH,IAEH,IAAMI,EAAmB,uCAAG,4CAAApH,EAAA,6DACpBsC,EAAajC,KAAKwC,MAAMX,aAAaY,QAAQ,WADzB,kBAGF7C,MAAM,uCAAyCL,EAAKqB,GAAI,CACtEd,QAAS,CAAE,iBAAkBmC,EAAWI,aAAc,cAAiBJ,EAAWS,iBAJlE,cAGdxC,EAHc,gBAMDA,EAAIC,OANH,UAMdC,EANc,OAQpBG,QAAQC,IAAIJ,GACC,kBAATA,EATgB,kCAWN8D,EAAclE,KAAKwC,MAAMX,aAAaY,QAAQ,WACpDZ,aAAasC,WAAW,UAZZ,UAaMvE,MAAM,oCAAqC,CACzDC,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEiE,kBAhBf,eAaNhE,EAbM,iBAkBOA,EAAIC,OAlBX,QAkBNC,EAlBM,OAmBZoB,EAAS,CAAEW,KAAM,UAAWC,QAAShC,IACrCzB,EAAQ2B,KAAK,UApBD,mDAsBZC,QAAQC,IAAR,KAAiB,KAAIH,KAtBT,oCAwBTD,EAAKgE,cAxBI,wBAyBhBvC,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUG,EAAKgE,gBAC/CA,EAAgBpE,KAAKwC,MAAMX,aAAaY,QAAQ,WA1BpC,oBA4BM7C,MAAM,uCAAyCL,EAAKqB,GAAI,CACtEd,QAAS,CAAE,iBAAkBsE,EAAc/B,aAAc,cAAiB+B,EAAc1B,iBA7BhF,eA4BNxC,EA5BM,iBA+BOA,EAAIC,OA/BX,QA+BNC,EA/BM,OAgCZG,QAAQC,IAAIJ,GACZqG,EAAgBrG,EAAKoG,cACrBjG,QAAQC,IAAIJ,EAAKoG,cACjB3E,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUmE,IAnClC,mDAsCZ7D,QAAQC,IAAR,KAAiB,KAAIH,KAtCT,gCAyChBoG,EAAgBrG,EAAKoG,cACrBjG,QAAQC,IAAIJ,EAAKoG,cACjBjG,QAAQC,IAAI,cACZqB,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUgC,IA5C9B,0DA+CpB1B,QAAQC,IAAR,KAAiB,KAAIH,KA/CD,0EAAH,qDAkDnB4G,EAA2B,uCAAG,gCAAAtH,EAAA,6DAC5BsC,EAAajC,KAAKwC,MAAMX,aAAaY,QAAQ,WADjB,kBAGV7C,MAAM,4CAA8CL,EAAKqB,GAAI,CAC3Ed,QAAS,CAAE,iBAAkBmC,EAAWI,aAAc,cAAiBJ,EAAWS,iBAJ1D,cAGtBxC,EAHsB,gBAMTA,EAAIC,OANK,OAMtBC,EANsB,OAO5BsG,EAAkBtG,EAAKsD,gBACvB7B,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUgC,IARlB,kDAU5B1B,QAAQC,IAAR,KAAiB,KAAIH,KAVO,0DAAH,qDAcjC,OACI,sBAAKI,UAAU,gBAAf,UACI,qBAAKA,UAAU,iBAAf,SACI,qBAAIA,UAAU,UAAd,0BAA4DmG,IAA3BjI,EAAQkI,SAAS/C,MAAsB,GAAKvE,EAAKT,KAAKoI,mBAG3F,sBAAKzG,UAAU,iBAAf,UACI,qBAAKA,UAAU,WAAf,SACKiD,GAAkBA,EAAeyD,OAAS,EAA+B,IAA1BzD,EAAeyD,OAAe,2DAAsC,4DAA6C,KAErK,qBAAK1G,UAAU,gBAAf,SACKiD,EAAiBA,EAAe0D,KAAI,SAAAC,GAAa,OAC9C,sBAAK5G,UAAU,gBAAf,UACI,cAACiF,EAAD,CAAwB9E,GAAIyG,EAAczG,GAAI+E,eAAgB0B,EAAc1B,eAAgBvC,MAAOiE,EAAcjE,MAAOtE,KAAMuI,EAAcvI,KAAMuE,MAAOgE,EAAchE,MAAOC,WAAY+D,EAAcC,YAAa/D,OAAQ8D,EAAcE,QACvO/D,UAAW6D,EAAc7D,UAAWC,SAAU4D,EAAcG,UAAWrE,gBAAiBA,IAFhG,MAAoCkE,EAAczG,OAE4E,QAI1I,qBAAKH,UAAU,WAAf,SACK+F,EAAwC,IAAxBA,EAAaW,OAAe,oBAAI1G,UAAU,MAAd,+CAA6D,oBAAIA,UAAU,MAAd,8BAA6C,KAG3J,qBAAKA,UAAU,gBAAf,SACI,qBAAKA,UAAWkD,EAAQd,KAAxB,SACI,qBAAKpC,UAAU,OAAf,SAEK+F,EAAeA,EAAaY,KAAI,SAAAK,GAAW,OACxC,qBAAKhH,UAAU,OAAf,SACI,cAACyC,EAAD,CAActC,GAAI6G,EAAY7G,GAAIwC,MAAOqE,EAAYrE,MAAOtE,KAAM2I,EAAY3I,KAAMuE,MAAOoE,EAAYpE,MAAOC,WAAYmE,EAAYH,YAAa/D,OAAQkE,EAAYF,QACnK/D,UAAWiE,EAAYjE,UAAWC,SAAUgE,EAAYD,UAAW9D,eAAgBA,EAAgBP,gBAAiBA,KAFjGsE,EAAY7G,OAEkH,YCzHrL,IAAM+B,EAAYC,YAAW,CAC3BC,KAAM,CACJC,SAAU,IAAKC,SAAU,KAE3BC,MAAO,CACLC,OAAQ,OAGG,SAASyE,EAAT,GAA0H,IAA9F9G,EAA6F,EAA7FA,GAAIwC,EAAyF,EAAzFA,MAAOtE,EAAkF,EAAlFA,KAAMuE,EAA4E,EAA5EA,MAAOC,EAAqE,EAArEA,WAAYC,EAAyD,EAAzDA,OAAQC,EAAiD,EAAjDA,UAAWC,EAAsC,EAAtCA,SAAU9E,EAA4B,EAA5BA,QAASwE,EAAmB,EAAnBA,gBAC7GQ,EAAUhB,IAIZnB,EAASC,cACPmC,EAAWC,aAAY,SAAAC,GAAK,OAAIA,EAAMF,YAC9CrD,QAAQC,IAAIoD,GAGV,IAAM+D,EAAiB,uCAAG,WAAO/G,GAAP,+BAAAjB,EAAA,6DAElB4C,EAAevC,KAAKwC,MAAMX,aAAaY,QAAQ,WAF7B,kBAIJ7C,MAAM,gDAAkDgB,EAAI,CAC5Ef,OAAQ,SACRC,QAAS,CAAE,iBAAkByC,EAAaF,aAAc,cAAiBE,EAAaG,iBANlE,cAIhBxC,EAJgB,gBAQHA,EAAIC,OARD,UAST,mBADPC,EARgB,yCAWZ8D,EAAclE,KAAKwC,MAAMX,aAAaY,QAAQ,WACpDZ,aAAasC,WAAW,UAZN,UAaAvE,MAAM,oCAAqC,CAC3DC,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEiE,kBAhBP,eAaZhE,EAbY,iBAkBCA,EAAIC,OAlBL,QAkBZC,EAlBY,OAmBlBoB,EAAS,CAAEW,KAAM,UAAWC,QAAShC,IACpCzB,EAAQ2B,KAAK,UApBI,kDAsBlBC,QAAQC,IAAR,KAAiB,KAAIH,KAtBH,oCAwBXD,EAAKgE,cAxBM,wBAyBpB5C,EAAS,CAAEW,KAAM,UAAWC,QAAShC,EAAKgE,gBAC1CvC,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUG,EAAKgE,gBAC/CA,EAAgBpE,KAAKwC,MAAMX,aAAaY,QAAQ,WA3BhC,oBA6BA7C,MAAM,gDAAkDgB,EAAI,CAC5Ef,OAAQ,SACRC,QAAS,CAAE,iBAAkBsE,EAAc/B,aAAc,cAAiB+B,EAAc1B,iBA/BxE,eA6BZxC,EA7BY,iBAiCCA,EAAIC,OAjCL,QAiCZC,EAjCY,OAkClB+C,EAAgB/C,EAAKoG,cACrB3E,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUmE,IAnC5B,mDAsClB7D,QAAQC,IAAR,KAAiB,KAAIH,KAtCH,gCAyCpB8C,EAAgB/C,EAAKoG,cACrB3E,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUsC,IA1C1B,0DA6CtBhC,QAAQC,IAAR,KAAiB,KAAIH,KACrB1B,EAAQ2B,KAAK,UA9CS,yEAAH,sDAiDrB,OACE,8BACE,eAACgE,EAAA,EAAD,CAAM7D,UAAWkD,EAAQd,KAAzB,UACE,eAAC0B,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CACE/D,UAAWkD,EAAQX,MACnBI,MAAOA,EACPqB,MAAO3F,IAET,eAAC4F,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,SACG/F,IAEH,eAAC6F,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,oBACUxB,KAEV,eAACsB,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,wBACcvB,KAEd,eAACqB,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,qBACWtB,KAEX,eAACoB,EAAA,EAAD,CAAYC,cAAY,EAACxD,QAAQ,KAAKyD,UAAU,KAAhD,wBACcrB,WAIlB,eAACsB,EAAA,EAAD,WACE,cAAC,IAAD,CAAY1D,QAAQ,UAAU2D,QAAQ,qBAAtC,SACG,SAACC,GAAD,OACC,gCACE,cAAC9D,EAAA,EAAD,yBAAQE,QAAQ,YAAYC,MAAM,WAAc4D,sBAAYD,IAA5D,4BAGA,cAACE,EAAA,EAAD,2BACMC,sBAAYH,IADlB,IAEEI,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,UARhB,SAWE,cAACE,EAAA,EAAD,CAAKC,EAAG,EAAR,SACE,eAACd,EAAA,EAAD,WAAalB,EAAb,kBAMV,cAACvC,EAAA,EAAD,CAAQC,QAAS,SAAAJ,GAAC,OAAI4G,EAAkB/G,IAAKQ,QAAQ,YAAYwG,KAAK,QAAQvG,MAAM,UAApF,oBAGA,cAACH,EAAA,EAAD,CAAQC,QAAS,SAAAJ,GAAC,OAAIpC,EAAQ2B,KAAK,oBACjC,CACE6B,KAAM,kBAAmBvB,GAAIA,EAAIwC,MAAOA,EAAOtE,KAAMA,EAAMuE,MAAOA,EAAOC,WAAYA,EAAYC,OAAQA,EAAQC,UAC/GA,EAAWC,SAAUA,KAEzBrC,QAAQ,YAAYwG,KAAK,QAAQvG,MAAM,UALzC,0B,OCjIG,SAASwG,EAAT,GAAoC,IAAZlJ,EAAW,EAAXA,QAE/BqB,KAAKwC,MAAyC,OAAnCX,aAAaY,QAAQ,WAA0E,UAApDzC,KAAKwC,MAAMX,aAAaY,QAAQ,WAAWnD,OAAmBX,EAAQ2B,KAAK,UAGrI,IAAMkB,EAAWC,cACXmC,EAAWC,aAAY,SAAAC,GAAK,OAAIA,EAAMF,YAC5CrD,QAAQC,IAAIoD,GACPA,EAAShD,IAAIjC,EAAQ2B,KAAK,UARe,MASNzB,mBAAS,IATH,mBASvC2H,EATuC,KASzBC,EATyB,OAUN5H,mBAAS,IAVH,mBAUvC8H,EAVuC,KAUzBxD,EAVyB,KAWxCzB,EAAeC,kBAAO,GAC5BC,qBAAU,WAENmF,IACArF,EAAaM,SAAQ,IACtB,CAAC2E,IAIJ,IAAMI,EAAmB,uCAAG,4CAAApH,EAAA,6DAClB4C,EAAevC,KAAKwC,MAAMX,aAAaY,QAAQ,WAD7B,kBAGF7C,MAAM,wCACpB,CACIE,QAAS,CAAE,iBAAkByC,EAAaF,aAAc,cAAiBE,EAAaG,iBAL1E,cAGdxC,EAHc,gBAODA,EAAIC,OAPH,UAOdC,EAPc,OAQpBG,QAAQC,IAAIJ,GACC,kBAATA,EATgB,kCAWN8D,EAAclE,KAAKwC,MAAMX,aAAaY,QAAQ,WACpDZ,aAAasC,WAAW,UAZZ,UAaMvE,MAAM,oCAAqC,CACzDC,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEiE,kBAhBf,eAaNhE,EAbM,iBAkBOA,EAAIC,OAlBX,QAkBNC,EAlBM,OAmBZoB,EAAS,CAAEW,KAAM,UAAWC,QAAShC,IACpCzB,EAAQ2B,KAAK,UApBF,mDAsBZC,QAAQC,IAAR,KAAiB,KAAIH,KAtBT,oCAwBTD,EAAKgE,cAxBI,wBAyBhB5C,EAAS,CAAEW,KAAM,UAAWC,QAAShC,EAAKgE,gBAC1C7D,QAAQC,IAAI,iBACZqB,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUG,EAAKgE,gBAC/CA,EAAgBpE,KAAKwC,MAAMX,aAAaY,QAAQ,WA5BpC,oBA8BM7C,MAAM,wCAAyC,CAC7DE,QAAS,CAAE,iBAAkBsE,EAAc/B,aAAc,cAAiB+B,EAAc1B,iBA/BhF,eA8BNxC,EA9BM,iBAiCOA,EAAIC,OAjCX,QAiCNC,EAjCM,OAkCZG,QAAQC,IAAIJ,GACZqG,EAAgBrG,EAAKoG,cACrB3E,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUmE,IApClC,mDAuCZ7D,QAAQC,IAAR,KAAiB,KAAIH,KAvCT,gCA2ChBoG,EAAgBrG,EAAKoG,cACrBjG,QAAQC,IAAI,cACZqB,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUsC,IA7C9B,0DAgDpBhC,QAAQC,IAAR,KAAiB,KAAIH,KACrB1B,EAAQ2B,KAAK,UAjDO,0EAAH,qDAoDzB,OACI,gCACI,+CACA,qBAAKG,UAAU,cAAf,SACI,qBAAKA,UAAU,aAAf,SACK+F,EAAaY,KAAI,SAAAK,GAAW,OACzB,sBAAKhH,UAAU,aAAf,UACI,cAACiH,EAAD,CAAkB9G,GAAI6G,EAAY7G,GAAIwC,MAAOqE,EAAYrE,MAAOtE,KAAM2I,EAAY3I,KAAMuE,MAAOoE,EAAYpE,MAAOC,WAAYmE,EAAYH,YAAa/D,OAAQkE,EAAYF,QACvK/D,UAAWiE,EAAYjE,UAAWC,SAAUgE,EAAYD,UAAW7I,QAASA,EAASwE,gBAAiBA,IAF9G,MAAkCsE,EAAY7G,WAMzD,cAACM,EAAA,EAAD,CAAQC,QAAS,kBAAMxC,EAAQ2B,KAAK,oBACjC,CAAE6B,KAAM,iBAAkBiB,MAAO,GAAItE,KAAM,GAAIuE,MAAO,GAAIC,WAAY,GAAIC,OAAQ,GAAIC,UAAW,EAAGC,SAAU,MAC9GrC,QAAQ,YAAYC,MAAM,UAAUZ,UAAU,MAFjD,6BAID,iDAAmB,cAAC,IAAD,CAAMa,GAAG,cAAT,wB,OC1FhB,SAASwG,EAAT,GAAwC,IAAZnJ,EAAW,EAAXA,QAGnCqB,KAAKwC,MAAyC,OAAnCX,aAAaY,QAAQ,WAA0E,UAApDzC,KAAKwC,MAAMX,aAAaY,QAAQ,WAAWnD,OAAmBX,EAAQ2B,KAAK,UACrIC,QAAQC,IAAI7B,GAEZ,IAAM6C,EAAWC,cANiC,EAOxB5C,wBAAoC+H,IAA3BjI,EAAQkI,SAAS/C,MAAsB,GAAKnF,EAAQkI,SAAS/C,MAAMV,OAPpD,mBAO3CA,EAP2C,KAOpC2E,EAPoC,OAQ1BlJ,wBAAoC+H,IAA3BjI,EAAQkI,SAAS/C,MAAsB,GAAKnF,EAAQkI,SAAS/C,MAAMhF,MARlD,mBAQ3CA,EAR2C,KAQrCC,EARqC,OASxBF,wBAAoC+H,IAA3BjI,EAAQkI,SAAS/C,MAAsB,GAAKnF,EAAQkI,SAAS/C,MAAMT,OATpD,mBAS3CA,EAT2C,KASpC2E,EAToC,OAUdnJ,wBAAoC+H,IAA3BjI,EAAQkI,SAAS/C,MAAsB,GAAKnF,EAAQkI,SAAS/C,MAAMR,YAV9D,mBAU3CA,EAV2C,KAU/B2E,EAV+B,OAWtBpJ,wBAAoC+H,IAA3BjI,EAAQkI,SAAS/C,MAAsB,GAAKnF,EAAQkI,SAAS/C,MAAMP,QAXtD,mBAW3CA,EAX2C,KAWnC2E,EAXmC,OAYhBrJ,wBAAoC+H,IAA3BjI,EAAQkI,SAAS/C,MAAsB,GAAKnF,EAAQkI,SAAS/C,MAAMN,WAAa,GAZzE,mBAY3CA,EAZ2C,KAYhC2E,EAZgC,OAalBtJ,wBAAoC+H,IAA3BjI,EAAQkI,SAAS/C,MAAsB,GAAKnF,EAAQkI,SAAS/C,MAAML,UAb1D,mBAa3CA,EAb2C,KAajC2E,EAbiC,KAcjCvE,aAAY,SAAAC,GAAK,OAAIA,EAAMF,YAC9BhD,IAAIjC,EAAQ2B,KAAK,UAC/B,IAAM+H,EAAc,uCAAG,4CAAA1I,EAAA,6DACb4C,EAAevC,KAAKwC,MAAMX,aAAaY,QAAQ,WACrDlC,QAAQC,IAAI+B,GAFO,kBAIG3C,MAAM,sCAAuC,CAC3DC,OAAQ,OACRC,QAAS,CAAE,eAAgB,mBAAoB,iBAAkByC,EAAaF,aAAc,cAAiBE,EAAaG,eAC1H3C,KAAMC,KAAKC,UAAU,CAAEmD,QAAOtE,OAAMuE,QAAOC,aAAYC,SAAQC,YAAWC,eAP/D,cAITvD,EAJS,gBASIA,EAAIC,OATR,UAWF,mBAFPC,EATS,0CAaD8D,EAAclE,KAAKwC,MAAMX,aAAaY,QAAQ,WACpDZ,aAAasC,WAAW,UAdjB,UAeWvE,MAAM,oCAAqC,CACzDC,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEiE,kBAlBpB,eAeDhE,EAfC,iBAoBYA,EAAIC,OApBhB,QAoBDC,EApBC,OAqBPoB,EAAS,CAAEW,KAAM,UAAWC,QAAShC,IACrCzB,EAAQ2B,KAAK,UAtBN,mDAwBPC,QAAQC,IAAR,KAAiB,KAAIH,KAxBd,oCA0BJD,EAAKgE,cA1BD,wBA2BX5C,EAAS,CAAEW,KAAM,SAAUC,QAAShC,EAAKgE,gBACzC7D,QAAQC,IAAI,iBACZqB,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUG,EAAKgE,gBAC/CA,EAAgBpE,KAAKwC,MAAMX,aAAaY,QAAQ,WACpDlC,QAAQC,IAAI4D,GA/BD,oBAiCWxE,MAAM,sCAAuC,CAC3DC,OAAQ,OACRC,QAAS,CAAE,eAAgB,mBAAoB,iBAAkBsE,EAAc/B,aAAc,cAAiB+B,EAAc1B,eAC5H3C,KAAMC,KAAKC,UAAU,CAAEmD,QAAOtE,OAAMuE,QAAOC,aAAYC,SAAQC,YAAWC,eApCvE,eAiCDvD,EAjCC,iBAsCYA,EAAIC,OAtChB,QAsCDC,EAtCC,OAuCPG,QAAQC,IAAIJ,GACZzB,EAAQ2B,KAAK,iBACbuB,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUmE,IAzCvC,mDA4CP7D,QAAQC,IAAR,KAAiB,KAAIH,KA5Cd,gCA+CXmB,EAAS,CAAEW,KAAM,SAAUC,QAAShC,IACpCG,QAAQC,IAAIJ,EAAKkI,gBACjB3J,EAAQ2B,KAAK,iBACbC,QAAQC,IAAI,cACZqB,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUsC,IAnDnC,0DAsDfhC,QAAQC,IAAR,KAAiB,KAAIH,KAtDN,0EAAH,qDAyDdkI,EAAe,uCAAG,4CAAA5I,EAAA,6DACpBY,QAAQC,IAAI7B,EAAQkI,SAAS/C,MAAMlD,IAC7B2B,EAAevC,KAAKwC,MAAMX,aAAaY,QAAQ,WAFjC,kBAIE7C,MAAM,8CAAgDjB,EAAQkI,SAAS/C,MAAMlD,GAAI,CAC/Ff,OAAQ,MACRC,QAAS,CAAE,eAAgB,mBAAoB,iBAAkByC,EAAaF,aAAc,cAAiBE,EAAaG,eAC1H3C,KAAMC,KAAKC,UAAU,CAAEmD,QAAOtE,OAAMuE,QAAOC,aAAYC,SAAQC,YAAWC,eAP9D,cAIVvD,EAJU,gBAUGA,EAAIC,OAVP,UAWH,mBADPC,EAVU,0CAaF8D,EAAclE,KAAKwC,MAAMX,aAAaY,QAAQ,WAb5C,UAeU7C,MAAM,oCAAqC,CACzDC,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEiE,kBAlBnB,eAeFhE,EAfE,iBAoBWA,EAAIC,OApBf,QAoBFC,EApBE,OAqBRoB,EAAS,CAAEW,KAAM,UAAWC,QAAShC,IACrCyB,aAAasC,WAAW,UACxBxF,EAAQ2B,KAAK,UAvBL,mDAyBRC,QAAQC,IAAR,KAAiB,KAAIH,KAzBb,oCA2BLD,EAAKgE,cA3BA,wBA4BZ5C,EAAS,CAAEW,KAAM,SAAUC,QAAShC,EAAKgE,gBACzCvC,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUG,EAAKgE,gBAC/CA,EAAgBpE,KAAKwC,MAAMX,aAAaY,QAAQ,WACpD9D,EAAQ2B,KAAK,iBA/BD,oBAiCUV,MAAM,8CAAgDjB,EAAQkI,SAAS/C,MAAMlD,GAAI,CAC/Ff,OAAQ,MACRC,QAAS,CAAE,eAAgB,mBAAoB,iBAAkBsE,EAAc/B,aAAc,cAAiB+B,EAAc1B,eAC5H3C,KAAMC,KAAKC,UAAU,CAAEmD,QAAOtE,OAAMuE,QAAOC,aAAYC,SAAQC,YAAWC,eApCtE,eAiCFvD,EAjCE,iBAsCWA,EAAIC,OAtCf,QAsCFC,EAtCE,OAuCRG,QAAQC,IAAIJ,GACZyB,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUmE,IAxCtC,mDA2CR7D,QAAQC,IAAR,KAAiB,KAAIH,KA3Cb,gCA8CZE,QAAQC,IAAIJ,EAAKoI,oBACjB7J,EAAQ2B,KAAK,iBACbuB,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUsC,IAhDlC,0DAoDhBhC,QAAQC,IAAR,KAAiB,KAAIH,KACrB1B,EAAQ2B,KAAK,UArDG,0EAAH,qDA2DrB,OACI,qBAAKG,UAAU,UAAf,SACI,sBAAKA,UAAU,OAAf,UACI,2DACA,cAACC,EAAA,EAAD,CAAWI,SAAU,SAAAC,GAAC,OAAIgH,EAAShH,EAAEC,OAAOC,QAAQL,GAAG,qBAAqBC,MAAM,QAAQI,MAAOmC,IACjG,cAAC1C,EAAA,EAAD,CAAWI,SAAU,SAAAC,GAAC,OAAIhC,EAAQgC,EAAEC,OAAOC,QAAQL,GAAG,qBAAqBC,MAAM,OAAOI,MAAOnC,IAC/F,cAAC4B,EAAA,EAAD,CAAWI,SAAU,SAAAC,GAAC,OAAIiH,EAASjH,EAAEC,OAAOC,QAAQL,GAAG,qBAAqBC,MAAM,QAAQI,MAAOoC,IACjG,cAAC3C,EAAA,EAAD,CAAWI,SAAU,SAAAC,GAAC,OAAIkH,EAAclH,EAAEC,OAAOC,QAAQL,GAAG,qBAAqBC,MAAM,cAAcI,MAAOqC,IAC5G,cAAC5C,EAAA,EAAD,CAAWI,SAAU,SAAAC,GAAC,OAAImH,EAAUnH,EAAEC,OAAOC,QAAQL,GAAG,qBAAqBC,MAAM,UAAUI,MAAOsC,IACpG,cAAC7C,EAAA,EAAD,CAAWI,SAAU,SAAAC,GAAC,OAAIoH,EAAapH,EAAEC,OAAOC,QAAQL,GAAG,qBAAqBC,MAAM,YAAYI,MAAOuC,IACzG,cAAC9C,EAAA,EAAD,CAAWI,SAAU,SAAAC,GAAC,OAAIqH,EAAYrH,EAAEC,OAAOC,QAAQL,GAAG,qBAAqBC,MAAM,YAAYI,MAAOwC,EAAUhD,UAAU,mBAChGmG,IAA3BjI,EAAQkI,SAAS/C,MAAsB,GAAqC,mBAAhCnF,EAAQkI,SAAS/C,MAAM3B,KAA6B,cAACjB,EAAA,EAAD,CAAQC,QAASkH,EAAgBjH,QAAQ,YAAYC,MAAM,UACxJoH,UAAWrF,IAAUtE,IAASuE,IAAUC,IAAeC,IAAWE,EAD2B,iBAE5E,cAACvC,EAAA,EAAD,CAAQC,QAASoH,EAAiBnH,QAAQ,YAAYC,MAAM,UAAUZ,UAAU,MAAhF,kBACrB,oEAAsC,cAAC,IAAD,CAAMa,GAAG,gBAAT,gC,OCnJvC,SAASoH,IAEpB,IAAM/J,EAAUC,cAChB2B,QAAQC,IAAI7B,GAEZ,IAAM6C,EAAWC,cACXmC,EAAWC,aAAY,SAAAC,GAAK,OAAIA,EAAMF,YAC5CrD,QAAQC,IAAIoD,GACZ,IAAM+E,EAAM,uCAAG,gCAAAhJ,EAAA,sEAEDuE,EAAclE,KAAKwC,MAAMX,aAAaY,QAAQ,WACpDZ,aAAasC,WAAW,UAHjB,SAIWvE,MAAM,oCAAqC,CACzDC,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEiE,kBAPpB,cAIDhE,EAJC,gBASYA,EAAIC,OAThB,OASDC,EATC,OAUPoB,EAAS,CAAEW,KAAM,UAAWC,QAAShC,IACrCzB,EAAQ2B,KAAK,SAXN,kDAaPC,QAAQC,IAAR,KAAgB,KAAIH,KAbb,0DAAH,qDAgBZ,OACI,sBAAKI,UAAU,SAAf,UACI,qBAAKA,UAAU,OAAf,SAAsB,qBAAKmI,IAAI,gOAAgOC,IAAI,WACnQ,qBAAKpI,UAAW,SAAhB,SACI,sDAEJ,qBAAKA,UAAU,SAAf,SACiD,OAA7CT,KAAKwC,MAAMX,aAAaY,QAAQ,YAAsBmB,EAAShD,GAAkC,cAACM,EAAA,EAAD,CAAQC,QAASwH,EAAQvH,QAAQ,YAAYC,MAAM,UAAnD,qBAA5B,qD,6BC7BtE,SAASyH,IACHrH,cAAjB,IACMmC,EAAWC,aAAY,SAAAC,GAAK,OAAIA,EAAMF,YAC5CrD,QAAQC,IAAIoD,GAHqB,MAKuB/E,mBAAS,IALhC,mBAK1BwF,EAL0B,KAKJ0E,EALI,KAM3BpK,EAAUC,cAGhBgD,qBAAU,WACF5B,KAAKwC,MAAyC,OAAnCX,aAAaY,QAAQ,WAA0E,UAApDzC,KAAKwC,MAAMX,aAAaY,QAAQ,WAAWnD,OAAmBX,EAAQ2B,KAAK,UACrI0I,MACD,IACH,IAAMA,EAA8B,uCAAG,0CAAArJ,EAAA,6DAC7B4C,EAAevC,KAAKwC,MAAMX,aAAaY,QAAQ,WADlB,kBAGb7C,MAAM,2CAA4C,CAChEE,QAAS,CAAE,iBAAkByC,EAAaF,aAAc,cAAiBE,EAAaG,iBAJ3D,cAGzBxC,EAHyB,gBAMZA,EAAIC,OANQ,UAOlB,mBADPC,EANyB,yCASjB8D,EAAclE,KAAKwC,MAAMX,aAAaY,QAAQ,WACpDZ,aAAasC,WAAW,UAVD,UAWLvE,MAAM,oCAAqC,CACzDC,OAAQ,MACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEiE,kBAdJ,eAWjBhE,EAXiB,iBAgBJA,EAAIC,OAhBA,eAiBvBxB,EAAQ2B,KAAK,UAjBU,kDAmBvBC,QAAQC,IAAR,KAAiB,KAAIH,KAnBE,oCAqBpBD,EAAKgE,cArBe,wBAsB3BvC,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUG,EAAKgE,gBAC/CA,EAAgBpE,KAAKwC,MAAMX,aAAaY,QAAQ,WAvBzB,oBAyBL7C,MAAM,2CAA4C,CAChEE,QAAS,CAAE,iBAAkBsE,EAAc/B,aAAc,cAAiB+B,EAAc1B,iBA1BrE,eAyBjBxC,EAzBiB,iBA4BJA,EAAIC,OA5BA,QA4BjBC,EA5BiB,OA6BvBG,QAAQC,IAAIJ,GACZ2I,EAAwB3I,EAAKsD,gBAC7B7B,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUmE,IA/BvB,mDAkCvB7D,QAAQC,IAAR,KAAiB,KAAIH,KAlCE,gCAqC3BE,QAAQC,IAAIJ,GACZ2I,EAAwB3I,EAAKsD,gBAC7B7B,aAAaS,QAAQ,SAAUtC,KAAKC,UAAUsC,IAvCnB,0DA0C/BhC,QAAQC,IAAR,KAAiB,KAAIH,KACrB1B,EAAQ2B,KAAK,UA3CkB,yEAAH,qDA8C9B2I,EAA6B5E,EAAqB6E,MAAK,SAAUvJ,EAAGwJ,GAAK,OAAOxJ,EAAE6D,UAAY2F,EAAE3F,aAEtG,OACI,sBAAK/C,UAAU,aAAf,UAEI,2DACA,sBAAKA,UAAU,QAAf,UACI,cAAC,IAAD,CACI2I,cAAe,GAAIC,MAAO,IAD9B,SAEKJ,EAA2B7B,KAAI,SAAAK,GAAW,OACvC,cAAC,IAAD,CAAYhH,UAAU,MAA2B6I,MAAO,CACpDC,YAAa,EACbnJ,KAAgC,IAA1BqH,EAAYjE,UAAkB,CAAEgG,KAAM,MAAOH,MAAO,IACrD5B,EAAYjE,UAAY,EAAI,CAAEgG,KAAM,SAAUH,MAAO,IAAQ,CAAEG,KAAM,QAASH,MAAO,KAE1FjJ,KAAM,CACF,CACIqJ,EAAE,OAAD,OAAShC,EAAY7G,GAArB,8CACF6G,EAAY3I,MACX4K,EAAE,GAAD,OAAKjC,EAAYjE,cATGiE,EAAY7G,SAcrD,6BAAI,cAAC,IAAD,CAAMU,GAAG,gBAAT,gCC7DLqI,MAlBf,WACI,OAAQ,qBAAMlJ,UAAU,MAAhB,SACJ,eAAC,IAAD,WACI,cAAC,EAAD,IACA,eAAC,IAAD,WACI,cAAC,IAAD,CAAOmJ,KAAK,QAAQC,OAAK,EAAChF,UAAWtD,IACrC,cAAC,IAAD,CAAOqI,KAAK,YAAY/E,UAAWnG,IACnC,cAAC,IAAD,CAAOkL,KAAK,gBAAgB/E,UAAW0B,IACvC,cAAC,IAAD,CAAOqD,KAAK,gBAAgB/E,UAAWgD,IACvC,cAAC,IAAD,CAAO+B,KAAK,oBAAoB/E,UAAWiD,IAC3C,cAAC,IAAD,CAAO8B,KAAK,cAAe/E,UAAWiE,IACtC,cAAC,IAAD,CAAUgB,KAAK,IAAIxI,GAAG,mBCbhCyI,EAAcC,YAAgB,CAEhCpG,SZTwB,WAAyC,IAAxCE,EAAuC,uDAA/BrF,EAAoBwL,EAAW,uCAChE,OAAQA,EAAO9H,MACX,IAAK,SAAL,MACoG8H,EAAO7H,QAA/FxB,EADZ,EACYA,GAAI9B,EADhB,EACgBA,KAAMoL,EADtB,EACsBA,SAAU5K,EADhC,EACgCA,KAAMJ,EADtC,EACsCA,SAAUE,EADhD,EACgDA,SAAU+K,EAD1D,EAC0DA,SAAU9H,EADpE,EACoEA,aAAcK,EADlF,EACkFA,cAE9E,OAAO,2BAAIoB,GAAX,IACIlD,KACA9B,OACAoL,WACA5K,OACAJ,WACAE,WACA+K,WACA9H,eACAK,kBAER,IAAK,UACD,OAAOjE,EACX,QACI,OAAOqF,MYPbsG,EAAQC,YAAYN,EAAaO,OAAOC,8BAAgCD,OAAOC,gCAGrFC,IAASC,OAAQ,cAAE,IAAF,CAAWL,MAAUA,EAArB,SACb,cAAC,EAAD,MAEAM,SAASC,eAAe,W","file":"static/js/main.0957f09d.chunk.js","sourcesContent":["\r\nlet initialStateOfUser = {}\r\nexport const loginReducer = (state = initialStateOfUser, action) => {\r\n    switch (action.type) {\r\n        case 'LOG_IN':\r\n            const { id, name, sur_name, role, username, password, signedIn, access_token, refresh_token } = action.payload\r\n\r\n            return {...state,\r\n                id,\r\n                name,\r\n                sur_name,\r\n                role,\r\n                username,\r\n                password,\r\n                signedIn,\r\n                access_token,\r\n                refresh_token\r\n            }\r\n        case 'LOG_OUT':\r\n            return initialStateOfUser\r\n        default:\r\n            return state\r\n    }\r\n\r\n\r\n\r\n}","\r\nimport React, { useState } from 'react'\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport './Register.css'\r\n\r\nexport default function Register() {\r\n\r\n    const history = useHistory()\r\n\r\n    const [name, setName] = useState('')\r\n    const [surname, setSurname] = useState('')\r\n    const [username, setUsername] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [role, setRole] = useState('')\r\n    const [user, setUser] = useState()\r\n\r\n\r\n    const register = async (err) => {\r\n\r\n        try {\r\n            const res = await fetch('http://localhost:1110/auth/register', {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ name, surname, username, password, role })\r\n            })\r\n            const data = await res.json()\r\n            if (!data.msg) {\r\n                history.push('/')\r\n            } else {\r\n                setUser(data)\r\n            }\r\n        } catch (err) {\r\n            setUser(err)\r\n            console.log(err, err.msg)\r\n        }\r\n    }\r\n\r\n    return (\r\n    <div className=\"register\">\r\n        <div className='register-form'>\r\n            <TextField required id=\"standard-required-1\"\r\n                label=\"NAME\" onChange={e => setName(e.target.value)} value={name} />\r\n            <TextField required id=\"standard-required-2\"\r\n                label=\"SURNAME\" onChange={e => setSurname(e.target.value)} value={surname} />\r\n            <TextField required id=\"standard-required-3\"\r\n                label=\"USERNAME\" onChange={e => setUsername(e.target.value)} value={username} />\r\n            <TextField required id=\"standard-required-4\"\r\n                label=\"PASSWORD\" onChange={e => setPassword(e.target.value)} value={password} />\r\n                <div className=\"btn-register\"></div>\r\n            <Button onClick={register} variant=\"contained\" color=\"primary\" className=\"btn-itself\">\r\n                Register\r\n                </Button> \r\n                <div className=\"msg-1\">\r\n                {user ? <h3>{user.msg}</h3> : ''}\r\n                </div>\r\n                <div className=\"msg-2\">\r\n            <h3>Already registered? Please,login <Link to='/login'>here</Link> </h3>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect,useRef } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { useDispatch } from 'react-redux'\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport './Login.css'\r\n\r\nexport default function Login() {\r\n\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const [username, setUsername] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [user, setUser] = useState([])\r\n    const isMountedRef = useRef(true)\r\n    useEffect(() => {\r\n        if (localStorage.signIn) {\r\n            loggedIn()\r\n            isMountedRef.current=false\r\n        }\r\n    }, [])\r\n\r\n    let signedUser = {}\r\n    const login = async () => {\r\n        try {\r\n            const res = await fetch('http://localhost:1110/auth/login', {\r\n                method: \"PUT\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ username, password })\r\n            })\r\n            const data = await res.json()\r\n            console.log(data)\r\n            signedUser = data[0]\r\n            console.log(signedUser)\r\n            dispatch({\r\n                type: 'LOG_IN', payload: data[0]\r\n            })\r\n            \r\n            if (signedUser.access_token && signedUser.role === 'guest') {\r\n                localStorage.setItem(\"signIn\", JSON.stringify(signedUser))\r\n                history.push('/displayguest', { user: signedUser })\r\n            } else if (signedUser.access_token && signedUser.role === 'admin') {\r\n                localStorage.setItem(\"signIn\", JSON.stringify(signedUser))\r\n                history.push('/displayadmin', { user: signedUser })\r\n            } else {\r\n                setUser(data)\r\n            }\r\n        } catch (err) {\r\n            console.log(err, err.msg)\r\n        }\r\n        console.log(signedUser)\r\n    }\r\n    ///////////////////////////////////////////////////////////////////////////\r\n    const loggedIn = async () => {\r\n        const signedInUser = JSON.parse(localStorage.getItem('signIn'))\r\n\r\n        try {\r\n            const res = await fetch('http://localhost:1110/auth/secret/' + signedInUser.id, {\r\n                headers: { 'x-access_token': signedInUser.access_token, 'refresh_token': signedInUser.refresh_token },\r\n            })\r\n            const data = await res.json()\r\n            setUser(data[0])\r\n            dispatch({\r\n                type: 'LOG_IN', payload: data[0]\r\n            })\r\n            signedUser = data[0]\r\n            console.log(signedUser)\r\n            if (signedUser.access_token && signedUser.role === 'guest') {\r\n                history.push('/displayguest', { user: signedUser })\r\n                localStorage.setItem(\"signIn\", JSON.stringify(signedUser))\r\n            } else if (signedUser.access_token && signedUser.role === 'admin') {\r\n                history.push('/displayadmin', { user: signedUser })\r\n                localStorage.setItem(\"signIn\", JSON.stringify(signedUser))\r\n            } else {\r\n                setUser(data)\r\n            }\r\n        } catch (err) {\r\n            console.log(err, err.msg)\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className='login'>\r\n            <div className=\"login-form\">\r\n\r\n                <TextField required id=\"standard-required-1\"\r\n                    label=\"USERNAME\" onChange={e => setUsername(e.target.value)} value={username} />\r\n                <TextField required id=\"standard-required-2\"\r\n                    label=\"PASSWORD\" onChange={e => setPassword(e.target.value)} value={password} />\r\n                <div className=\"btn-login\">\r\n                    <Button onClick={login} variant=\"contained\" color=\"primary\">\r\n                        LOGIN\r\n                </Button>\r\n                </div>\r\n                {user ? <h3>{user.msg}</h3> : ''}\r\n                <h3>Don't have an account yet? Please <Link to='/register'> register here</Link></h3>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Popover from '@material-ui/core/Popover';\r\nimport PopupState, { bindTrigger, bindPopover } from 'material-ui-popup-state';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\n\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    maxWidth: 400, minWidth: 250,\r\n  },\r\n  media: {\r\n    height: 150,\r\n  },\r\n});\r\n\r\n\r\nexport default function Destination({ setHandleChange, id, image, name, price, startsFrom, endsAt, followers, moreInfo, myDestinations,history }) {\r\n  const classes = useStyles();\r\n\r\n  const isLogged = useSelector(state => state.isLogged)\r\n  const dispatch = useDispatch()\r\n \r\n\r\n\r\n\r\n\r\n\r\n  const followMeFunction = async (id) => {\r\n    const userId = isLogged.id\r\n    const destinationId = id\r\n\r\n    let signedInUser = JSON.parse(localStorage.getItem('signIn'))\r\n    console.log(signedInUser)\r\n    try {\r\n      const res = await fetch('http://localhost:1110/vacations/follow', {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\", \"x-access_token\": signedInUser.access_token, \"refresh_token\": signedInUser.refresh_token },\r\n        body: JSON.stringify({ destinationId, image, name, price, startsFrom, endsAt, followers, moreInfo, userId })\r\n      })\r\n      const data = await res.json()\r\n      if (data === \"Please log in\") {\r\n        try {\r\n          const storedToken = JSON.parse(localStorage.getItem(\"signIn\"))\r\n          localStorage.removeItem(\"signIn\")\r\n          const res = await fetch('http://localhost:1110/auth/logout', {\r\n            method: \"PUT\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ storedToken })\r\n          })\r\n          const data = await res.json()\r\n          dispatch({ type: \"LOG_OUT\", payload: data })\r\n          history.push('/login')\r\n        } catch (err) {\r\n          console.log(err, err.msg)\r\n        }\r\n      } else if (data.refreshedUser) {\r\n        localStorage.setItem(\"signIn\", JSON.stringify(data.refreshedUser))\r\n        let refreshedUser = JSON.parse(localStorage.getItem('signIn'))\r\n        console.log(refreshedUser)\r\n        try {\r\n          const res = await fetch('http://localhost:1110/vacations/follow', {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\", 'x-access_token': refreshedUser.access_token, 'refresh_token': refreshedUser.refresh_token },\r\n            body: JSON.stringify({ destinationId, image, name, price, startsFrom, endsAt, followers, moreInfo, userId })\r\n          })\r\n          const data = await res.json()\r\n          console.log(data)\r\n          dispatch({\r\n            type: \"FOLLOW\", payload: data\r\n          })\r\n          setHandleChange(data.followedDestinations)\r\n          localStorage.setItem(\"signIn\", JSON.stringify(refreshedUser))\r\n        } catch (err) {\r\n          console.log(err, err.msg)\r\n        }\r\n      } else {\r\n        dispatch({\r\n          type: \"FOLLOW\", payload: data\r\n        })\r\n        setHandleChange(data.followedDestinations)\r\n        localStorage.setItem(\"signIn\", JSON.stringify(signedInUser))\r\n      }\r\n    } catch (err) {\r\n      console.log(err, err.msg)\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <Card className={classes.root}>\r\n        <CardActionArea>\r\n          <CardMedia\r\n            className={classes.media}\r\n            image={image}\r\n            title={name}\r\n          />\r\n          <CardContent>\r\n            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n              {name}\r\n            </Typography>\r\n            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n              Price: {price}\r\n            </Typography>\r\n            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n              Departure: {startsFrom}\r\n            </Typography>\r\n            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n              Return: {endsAt}\r\n            </Typography>\r\n            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n              Followers: {followers}\r\n            </Typography>\r\n          </CardContent>\r\n        </CardActionArea>\r\n        <CardActions>\r\n          <PopupState variant=\"popover\" popupId=\"demo-popup-popover\">\r\n            {(popupState) => (\r\n              <div>\r\n                <Button variant=\"contained\" color=\"primary\" {...bindTrigger(popupState)}>\r\n                  More Info\r\n          </Button>\r\n                <Popover\r\n                  {...bindPopover(popupState)}\r\n                  anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                  }}\r\n                  transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                  }}\r\n                >\r\n                  <Box p={2}>\r\n                    <Typography>{moreInfo}.</Typography>\r\n                  </Box>\r\n                </Popover>\r\n              </div>\r\n            )}\r\n          </PopupState>\r\n          <Button onClick={e => followMeFunction(id)} variant=\"contained\" color=\"primary\">Follow Me</Button>\r\n        </CardActions>\r\n      </Card>\r\n\r\n\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Popover from '@material-ui/core/Popover';\r\nimport PopupState, { bindTrigger, bindPopover } from 'material-ui-popup-state';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    maxWidth: 400, minWidth: 250\r\n  },\r\n  media: {\r\n    height: 150,\r\n  },\r\n});\r\n\r\nexport default function FolllowedDestinations({ setHandleChange, id, destination_id, image, name, price, startsFrom, endsAt, followers, moreInfo,history }) {\r\n  console.log(id)\r\n  const classes = useStyles();\r\n\r\n   const isLogged = useSelector(state => state.isLogged)\r\n   const followMe = useSelector(state => state.followMe)\r\n  const dispatch = useDispatch()\r\n\r\n\r\n\r\n  const unfollowMeFunction = async () => {\r\n    const signedInUser = JSON.parse(localStorage.getItem('signIn'))\r\n    try {\r\n      const res = await fetch('http://localhost:1110/vacations/' + signedInUser.id, {\r\n        method: \"DELETE\",\r\n        headers: { \"Content-Type\": \"application/json\", 'x-access_token': signedInUser.access_token, 'refresh_token': signedInUser.refresh_token },\r\n        body: JSON.stringify({ id, destination_id })\r\n\r\n      })\r\n      const data = await res.json()\r\n      if (data === \"Please log in\") {\r\n        try {\r\n          const storedToken = JSON.parse(localStorage.getItem(\"signIn\"))\r\n          localStorage.removeItem(\"signIn\")\r\n          const res = await fetch('http://localhost:1110/auth/logout', {\r\n            method: \"PUT\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ storedToken })\r\n          })\r\n          const data = await res.json()\r\n          dispatch({ type: \"LOG_OUT\", payload: data })\r\n          history.push('/login')\r\n        } catch (err) {\r\n          console.log(err, err.msg)\r\n        }\r\n      } else if (data.refreshedUser) {\r\n        console.log(\"refresh works\")\r\n        localStorage.setItem(\"signIn\", JSON.stringify(data.refreshedUser))\r\n        let refreshedUser = JSON.parse(localStorage.getItem('signIn'))\r\n        console.log(refreshedUser)\r\n        try {\r\n          const res = await fetch('http://localhost:1110/vacations/' + refreshedUser.id, {\r\n            method: \"DELETE\",\r\n            headers: { \"Content-Type\": \"application/json\", 'x-access_token': refreshedUser.access_token, 'refresh_token': refreshedUser.refresh_token },\r\n            body: JSON.stringify({ id, destination_id })\r\n\r\n          })\r\n          const data = await res.json()\r\n          console.log(data)\r\n          dispatch({\r\n            type: \"FOLLOW\", payload: data\r\n          })\r\n          setHandleChange(data.followedDestinations)\r\n          localStorage.setItem(\"signIn\", JSON.stringify(refreshedUser))\r\n        } catch (err) {\r\n          console.log(err, err.msg)\r\n        }\r\n      } else {\r\n        dispatch({\r\n          type: \"FOLLOW\", payload: data\r\n        })\r\n        setHandleChange(data.followedDestinations)\r\n        localStorage.setItem(\"signIn\", JSON.stringify(signedInUser))\r\n      }\r\n    } catch (err) {\r\n      console.log(err, err.msg)\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"followed-card\">\r\n      <Card className={classes.root}>\r\n        <CardActionArea>\r\n          <CardMedia\r\n            className={classes.media}\r\n            image={image}\r\n            title={name}\r\n          />\r\n          <CardContent>\r\n            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n              {name}\r\n            </Typography>\r\n            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n              Price: {price}\r\n            </Typography>\r\n            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n              Departure: {startsFrom}\r\n            </Typography>\r\n            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n              Return: {endsAt}\r\n            </Typography>\r\n            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n              Follows: {followers}\r\n            </Typography>\r\n          </CardContent>\r\n        </CardActionArea>\r\n        <CardActions>\r\n          <PopupState variant=\"popover\" popupId=\"demo-popup-popover\">\r\n            {(popupState) => (\r\n              <div>\r\n                <Button variant=\"contained\" color=\"primary\" {...bindTrigger(popupState)}>\r\n                  More Info\r\n          </Button>\r\n                <Popover\r\n                  {...bindPopover(popupState)}\r\n                  anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                  }}\r\n                  transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                  }}\r\n                >\r\n                  <Box p={2}>\r\n                    <Typography>{moreInfo}.</Typography>\r\n                  </Box>\r\n                </Popover>\r\n              </div>\r\n            )}\r\n          </PopupState>\r\n          <Button onClick={e => unfollowMeFunction(id)} variant=\"contained\" color=\"primary\">Unfollow Me</Button>\r\n        </CardActions>\r\n      </Card>\r\n\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport Destination from './Destination'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport FolllowedDestinations from './FolllowedDestinations'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport './DisplayGuest.css'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 2,\r\n    },\r\n    card: {\r\n        padding: theme.spacing(1),\r\n        textAlign: 'center',\r\n        color: theme.palette.text.secondary,\r\n    },\r\n}));\r\nexport default function DisplayGuest({ history }) {\r\n\r\n    const classes = useStyles();\r\n    if (JSON.parse(localStorage.getItem('signIn') === null || JSON.parse(localStorage.getItem('signIn')).role === 'admin')) history.push('/login')\r\n\r\n    const [destinations, setDestinations] = useState([])\r\n    const [myDestinations, setMyDestinations] = useState([])\r\n    const [handleChange, setHandleChange] = useState([])\r\n    const dispatch = useDispatch()\r\n    const isLogged = useSelector(state => state.isLogged)\r\n    let user = history.location.state === undefined ? '' : (history.location.state.user)\r\n\r\n    if (!isLogged.id) history.push('/login')\r\n    useEffect(() => {\r\n         let isMounted = true;\r\n         if (isMounted) {\r\n            displayDestinations()\r\n            setTimeout(() => {\r\n                displayFollowedDestinations()    \r\n            }, 50);\r\n           \r\n        }\r\n         return () => { isMounted = false }\r\n    },[handleChange])\r\n  \r\n    const displayDestinations = async () => {\r\n        let signedUser = JSON.parse(localStorage.getItem('signIn'))\r\n        try {\r\n            const res = await fetch('http://localhost:1110/vacations/all/' + user.id, {\r\n                headers: { 'x-access_token': signedUser.access_token, 'refresh_token': signedUser.refresh_token }\r\n            })\r\n            const data = await res.json()\r\n           \r\n            console.log(data)\r\n            if (data === \"Please log in\") {\r\n                try {\r\n                    const storedToken = JSON.parse(localStorage.getItem(\"signIn\"))\r\n                    localStorage.removeItem(\"signIn\")\r\n                    const res = await fetch('http://localhost:1110/auth/logout', {\r\n                        method: \"PUT\",\r\n                        headers: { \"Content-Type\": \"application/json\" },\r\n                        body: JSON.stringify({ storedToken })\r\n                    })\r\n                    const data = await res.json()\r\n                    dispatch({ type: \"LOG_OUT\", payload: data })\r\n                    history.push('/login')\r\n                } catch (err) {\r\n                    console.log(err, err.msg)\r\n                }\r\n            } else if (data.refreshedUser) {\r\n                localStorage.setItem(\"signIn\", JSON.stringify(data.refreshedUser))\r\n                let refreshedUser = JSON.parse(localStorage.getItem('signIn'))\r\n                try {\r\n                    const res = await fetch('http://localhost:1110/vacations/all/' + user.id, {\r\n                        headers: { 'x-access_token': refreshedUser.access_token, 'refresh_token': refreshedUser.refresh_token }\r\n                    })\r\n                    const data = await res.json()\r\n                    console.log(data)\r\n                    setDestinations(data.destinations)\r\n                    console.log(data.destinations)\r\n                    localStorage.setItem(\"signIn\", JSON.stringify(refreshedUser))\r\n                }\r\n                catch (err) {\r\n                    console.log(err, err.msg)\r\n                }\r\n            } else {\r\n                setDestinations(data.destinations)\r\n                console.log(data.destinations)\r\n                console.log(\"No refresh\")\r\n                localStorage.setItem(\"signIn\", JSON.stringify(signedUser))\r\n            }\r\n        } catch (err) {\r\n            console.log(err, err.msg)\r\n        }\r\n    }\r\n    const displayFollowedDestinations = async () => {\r\n        let signedUser = JSON.parse(localStorage.getItem('signIn'))\r\n        try {\r\n            const res = await fetch('http://localhost:1110/vacations/followed/' + user.id, {\r\n                headers: { 'x-access_token': signedUser.access_token, 'refresh_token': signedUser.refresh_token }\r\n            })\r\n            const data = await res.json()\r\n            setMyDestinations(data.myDestinations)\r\n            localStorage.setItem(\"signIn\", JSON.stringify(signedUser))\r\n        } catch (err) {\r\n            console.log(err, err.msg)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"display-guest\">\r\n            <div className=\"fixed-headings\">\r\n                <h2 className=\"welcome\">WELCOME {history.location.state === undefined ? '' : user.name.toUpperCase()}</h2>\r\n\r\n            </div>\r\n            <div className=\"followed-cards\">\r\n                <div className=\"favorite\">\r\n                    {myDestinations ? (myDestinations.length > 0 ? (myDestinations.length === 1 ? <h2 >Your favorite destination</h2> : <h2>Your favorite destinations</h2>) : '') : ''}\r\n                </div>\r\n                <div className=\"followed-grid\">\r\n                    {myDestinations ? myDestinations.map(mydestination =>\r\n                        <div className=\"followed-card\" key={mydestination.id}>\r\n                            <FolllowedDestinations  id={mydestination.id} destination_id={mydestination.destination_id} image={mydestination.image} name={mydestination.name} price={mydestination.price} startsFrom={mydestination.starts_from} endsAt={mydestination.ends_at}\r\n                                followers={mydestination.followers} moreInfo={mydestination.more_info} setHandleChange={setHandleChange} /> </div>) : ''}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"headings\">\r\n                {destinations ? (destinations.length === 1 ? <h2 className=\"all\">Am I The Only One You Don't Like?</h2> : <h2 className=\"all\">All Destinations</h2>) : ''}\r\n            </div>\r\n\r\n            <div className=\"display-cards\">\r\n                <div className={classes.root}>\r\n                    <div className=\"grid\">\r\n\r\n                        {destinations ? destinations.map(destination =>\r\n                            <div className=\"card\" key={destination.id}>\r\n                                <Destination  id={destination.id} image={destination.image} name={destination.name} price={destination.price} startsFrom={destination.starts_from} endsAt={destination.ends_at}\r\n                                    followers={destination.followers} moreInfo={destination.more_info} myDestinations={myDestinations} setHandleChange={setHandleChange} /></div>) : \"\"}\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button';\r\nimport { useSelector,useDispatch } from 'react-redux'\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Popover from '@material-ui/core/Popover';\r\nimport PopupState, { bindTrigger, bindPopover } from 'material-ui-popup-state';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\n\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    maxWidth: 400, minWidth: 250\r\n  },\r\n  media: {\r\n    height: 150,\r\n  },\r\n});\r\nexport default function DestinationAdmin({ id, image, name, price, startsFrom, endsAt, followers, moreInfo, history, setHandleChange }) {\r\n  const classes = useStyles();\r\n\r\n\r\n \r\nconst dispatch=useDispatch()\r\n  const isLogged = useSelector(state => state.isLogged)\r\nconsole.log(isLogged)\r\n\r\n\r\n  const deleteDestination = async (id) => {\r\n\r\n    const signedInUser = JSON.parse(localStorage.getItem('signIn'))\r\n    try {\r\n      const res = await fetch('http://localhost:1110/vacations/delete/admin/' + id, {\r\n        method: \"DELETE\",\r\n        headers: { 'x-access_token': signedInUser.access_token, 'refresh_token': signedInUser.refresh_token }\r\n      })\r\n      const data = await res.json()\r\n      if (data === \"Please log in\") {\r\n        try {\r\n          const storedToken = JSON.parse(localStorage.getItem(\"signIn\"))\r\n          localStorage.removeItem(\"signIn\")\r\n          const res = await fetch('http://localhost:1110/auth/logout', {\r\n            method: \"PUT\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ storedToken })\r\n          })\r\n          const data = await res.json()\r\n          dispatch({ type: \"LOG_OUT\", payload: data })\r\n           history.push('/login')\r\n        } catch (err) {\r\n          console.log(err, err.msg)\r\n        }\r\n      } else if (data.refreshedUser) {\r\n        dispatch({ type: \"LOG_OUT\", payload: data.refreshedUser })\r\n        localStorage.setItem(\"signIn\", JSON.stringify(data.refreshedUser))\r\n        let refreshedUser = JSON.parse(localStorage.getItem('signIn'))\r\n        try {\r\n          const res = await fetch('http://localhost:1110/vacations/delete/admin/' + id, {\r\n            method: \"DELETE\",\r\n            headers: { 'x-access_token': refreshedUser.access_token, 'refresh_token': refreshedUser.refresh_token }\r\n          })\r\n          const data = await res.json()\r\n          setHandleChange(data.destinations)\r\n          localStorage.setItem(\"signIn\", JSON.stringify(refreshedUser))\r\n        }\r\n        catch (err) {\r\n          console.log(err, err.msg)\r\n        }\r\n      } else {\r\n        setHandleChange(data.destinations)\r\n        localStorage.setItem(\"signIn\", JSON.stringify(signedInUser))\r\n      }\r\n    } catch (err) {\r\n      console.log(err, err.msg)\r\n      history.push('/login')\r\n    }\r\n  }\r\n    return (\r\n      <div>\r\n        <Card className={classes.root}>\r\n          <CardActionArea>\r\n            <CardMedia\r\n              className={classes.media}\r\n              image={image}\r\n              title={name}\r\n            />\r\n            <CardContent>\r\n              <Typography gutterBottom variant=\"h6\" component=\"h5\">\r\n                {name}\r\n              </Typography>\r\n              <Typography gutterBottom variant=\"h6\" component=\"h5\">\r\n                Price: {price}\r\n              </Typography>\r\n              <Typography gutterBottom variant=\"h6\" component=\"h5\">\r\n                Departure: {startsFrom}\r\n              </Typography>\r\n              <Typography gutterBottom variant=\"h6\" component=\"h5\">\r\n                Return: {endsAt}\r\n              </Typography>\r\n              <Typography gutterBottom variant=\"h6\" component=\"h5\">\r\n                Followers: {followers}\r\n              </Typography>\r\n            </CardContent>\r\n          </CardActionArea>\r\n          <CardActions>\r\n            <PopupState variant=\"popover\" popupId=\"demo-popup-popover\">\r\n              {(popupState) => (\r\n                <div>\r\n                  <Button variant=\"contained\" color=\"primary\" {...bindTrigger(popupState)}>\r\n                    More Info\r\n          </Button>\r\n                  <Popover\r\n                    {...bindPopover(popupState)}\r\n                    anchorOrigin={{\r\n                      vertical: 'bottom',\r\n                      horizontal: 'center',\r\n                    }}\r\n                    transformOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'center',\r\n                    }}\r\n                  >\r\n                    <Box p={2}>\r\n                      <Typography>{moreInfo}.</Typography>\r\n                    </Box>\r\n                  </Popover>\r\n                </div>\r\n              )}\r\n            </PopupState>\r\n            <Button onClick={e => deleteDestination(id)} variant=\"contained\" size=\"small\" color=\"primary\">\r\n              Delete\r\n                </Button>\r\n            <Button onClick={e => history.push('/AddEditFormAdmin',\r\n              {\r\n                type: \"editDestination\", id: id, image: image, name: name, price: price, startsFrom: startsFrom, endsAt: endsAt, followers:\r\n                  followers, moreInfo: moreInfo\r\n              })}\r\n              variant=\"contained\" size=\"small\" color=\"primary\">\r\n              EDIT\r\n                </Button>\r\n          </CardActions>\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n","import React, { useEffect, useState,useRef } from 'react'\r\nimport Button from '@material-ui/core/Button';\r\nimport DestinationAdmin from './DestinationAdmin';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom';\r\nimport './DisplayAdmin.css'\r\n\r\n\r\nexport default function DisplayAdmin({ history }) {\r\n\r\n    if (JSON.parse(localStorage.getItem('signIn') === null || JSON.parse(localStorage.getItem('signIn')).role !== 'admin')) history.push('/login')\r\n\r\n\r\n    const dispatch = useDispatch()\r\n    const isLogged = useSelector(state => state.isLogged)\r\n    console.log(isLogged)\r\n    if (!isLogged.id) history.push('/login')\r\n    const [destinations, setDestinations] = useState([])\r\n    const [handleChange, setHandleChange] = useState([])\r\n    const isMountedRef = useRef(true)\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        displayDestinations()\r\n        isMountedRef.current=false\r\n    }, [handleChange])\r\n\r\n\r\n\r\n    const displayDestinations = async () => {\r\n        const signedInUser = JSON.parse(localStorage.getItem('signIn'))\r\n        try {\r\n            const res = await fetch('http://localhost:1110/vacations/admin',\r\n                {\r\n                    headers: { 'x-access_token': signedInUser.access_token, 'refresh_token': signedInUser.refresh_token }\r\n                })\r\n            const data = await res.json()\r\n            console.log(data)\r\n            if (data === \"Please log in\") {\r\n                try {\r\n                    const storedToken = JSON.parse(localStorage.getItem(\"signIn\"))\r\n                    localStorage.removeItem(\"signIn\")\r\n                    const res = await fetch('http://localhost:1110/auth/logout', {\r\n                        method: \"PUT\",\r\n                        headers: { \"Content-Type\": \"application/json\" },\r\n                        body: JSON.stringify({ storedToken })\r\n                    })\r\n                    const data = await res.json()\r\n                    dispatch({ type: \"LOG_OUT\", payload: data })\r\n                     history.push('/login')\r\n                } catch (err) {\r\n                    console.log(err, err.msg)\r\n                }\r\n            } else if (data.refreshedUser) {\r\n                dispatch({ type: \"LOG_OUT\", payload: data.refreshedUser })\r\n                console.log(\"refresh works\")\r\n                localStorage.setItem(\"signIn\", JSON.stringify(data.refreshedUser))\r\n                let refreshedUser = JSON.parse(localStorage.getItem('signIn'))\r\n                try {\r\n                    const res = await fetch('http://localhost:1110/vacations/admin', {\r\n                        headers: { 'x-access_token': refreshedUser.access_token, 'refresh_token': refreshedUser.refresh_token }\r\n                    })\r\n                    const data = await res.json()\r\n                    console.log(data)\r\n                    setDestinations(data.destinations)\r\n                    localStorage.setItem(\"signIn\", JSON.stringify(refreshedUser))\r\n                }\r\n                catch (err) {\r\n                    console.log(err, err.msg)\r\n                }\r\n            } else {\r\n                \r\n                setDestinations(data.destinations)\r\n                console.log(\"No refresh\")\r\n                localStorage.setItem(\"signIn\", JSON.stringify(signedInUser))\r\n            }\r\n        } catch (err) {\r\n            console.log(err, err.msg)\r\n            history.push('/login')\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <h1>Welcome Admin</h1>\r\n            <div className=\"admin-cards\">\r\n                <div className=\"admin-grid\">\r\n                    {destinations.map(destination =>\r\n                        <div className=\"admin-card\"  key={destination.id}>\r\n                            <DestinationAdmin id={destination.id} image={destination.image} name={destination.name} price={destination.price} startsFrom={destination.starts_from} endsAt={destination.ends_at}\r\n                                followers={destination.followers} moreInfo={destination.more_info} history={history} setHandleChange={setHandleChange} /> </div>)}\r\n                </div >\r\n            </div>\r\n\r\n            {<Button onClick={() => history.push('/AddEditFormAdmin',\r\n                { type: \"addDestination\", image: \"\", name: \"\", price: \"\", startsFrom: \"\", endsAt: \"\", followers: 0, moreInfo: '' })}\r\n                variant=\"contained\" color=\"primary\" className=\"add\">ADD DESTINATION</Button>}\r\n\r\n            <h2>Statistics are <Link to='/statistics'>HERE</Link></h2>\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport './AddEditForm.css'\r\nexport default function AddEditFormAdmin({ history }) {\r\n\r\n\r\n    if (JSON.parse(localStorage.getItem('signIn') === null || JSON.parse(localStorage.getItem('signIn')).role !== 'admin')) history.push('/login')\r\n    console.log(history)\r\n\r\n    const dispatch = useDispatch()\r\n    const [image, setImage] = useState(history.location.state === undefined ? '' : history.location.state.image)\r\n    const [name, setName] = useState(history.location.state === undefined ? '' : history.location.state.name)\r\n    const [price, setPrice] = useState(history.location.state === undefined ? '' : history.location.state.price)\r\n    const [startsFrom, setStartsFrom] = useState(history.location.state === undefined ? '' : history.location.state.startsFrom)\r\n    const [endsAt, setEndsAt] = useState(history.location.state === undefined ? '' : history.location.state.endsAt)\r\n    const [followers, setFollowers] = useState(history.location.state === undefined ? '' : history.location.state.followers || 0)\r\n    const [moreInfo, setMoreInfo] = useState(history.location.state === undefined ? '' : history.location.state.moreInfo)\r\n    const isLogged = useSelector(state => state.isLogged)\r\n    if (!isLogged.id) history.push('/login')\r\n    const addDestination = async () => {\r\n        const signedInUser = JSON.parse(localStorage.getItem('signIn'))\r\n        console.log(signedInUser)\r\n        try {\r\n            const res = await fetch('http://localhost:1110/vacations/add', {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\", 'x-access_token': signedInUser.access_token, 'refresh_token': signedInUser.refresh_token },\r\n                body: JSON.stringify({ image, name, price, startsFrom, endsAt, followers, moreInfo })\r\n            })\r\n            const data = await res.json()\r\n\r\n            if (data === \"Please log in\") {\r\n                try {\r\n                    const storedToken = JSON.parse(localStorage.getItem(\"signIn\"))\r\n                    localStorage.removeItem(\"signIn\")\r\n                    const res = await fetch('http://localhost:1110/auth/logout', {\r\n                        method: \"PUT\",\r\n                        headers: { \"Content-Type\": \"application/json\" },\r\n                        body: JSON.stringify({ storedToken })\r\n                    })\r\n                    const data = await res.json()\r\n                    dispatch({ type: \"LOG_OUT\", payload: data })\r\n                    history.push('/login')\r\n                } catch (err) {\r\n                    console.log(err, err.msg)\r\n                }\r\n            } else if (data.refreshedUser) {\r\n                dispatch({ type: \"LOG_IN\", payload: data.refreshedUser })\r\n                console.log(\"refresh works\")\r\n                localStorage.setItem(\"signIn\", JSON.stringify(data.refreshedUser))\r\n                let refreshedUser = JSON.parse(localStorage.getItem('signIn'))\r\n                console.log(refreshedUser)\r\n                try {\r\n                    const res = await fetch('http://localhost:1110/vacations/add', {\r\n                        method: \"POST\",\r\n                        headers: { \"Content-Type\": \"application/json\", 'x-access_token': refreshedUser.access_token, 'refresh_token': refreshedUser.refresh_token },\r\n                        body: JSON.stringify({ image, name, price, startsFrom, endsAt, followers, moreInfo })\r\n                    })\r\n                    const data = await res.json()\r\n                    console.log(data)\r\n                    history.push('/AdminDisplay')\r\n                    localStorage.setItem(\"signIn\", JSON.stringify(refreshedUser))\r\n                }\r\n                catch (err) {\r\n                    console.log(err, err.msg)\r\n                }\r\n            } else {\r\n                dispatch({ type: \"LOG_IN\", payload: data })\r\n                console.log(data.newDestination)\r\n                history.push('/AdminDisplay')\r\n                console.log(\"No refresh\")\r\n                localStorage.setItem(\"signIn\", JSON.stringify(signedInUser))\r\n            }\r\n        } catch (err) {\r\n            console.log(err, err.msg)\r\n        }\r\n    }\r\n    const editDestination = async () => {\r\n        console.log(history.location.state.id)\r\n        const signedInUser = JSON.parse(localStorage.getItem('signIn'))\r\n        try {\r\n            const res = await fetch('http://localhost:1110/vacations/edit/admin/' + history.location.state.id, {\r\n                method: \"PUT\",\r\n                headers: { \"Content-Type\": \"application/json\", 'x-access_token': signedInUser.access_token, 'refresh_token': signedInUser.refresh_token },\r\n                body: JSON.stringify({ image, name, price, startsFrom, endsAt, followers, moreInfo })\r\n            })\r\n\r\n            const data = await res.json()\r\n            if (data === \"Please log in\") {\r\n                try {\r\n                    const storedToken = JSON.parse(localStorage.getItem(\"signIn\"))\r\n                    \r\n                    const res = await fetch('http://localhost:1110/auth/logout', {\r\n                        method: \"PUT\",\r\n                        headers: { \"Content-Type\": \"application/json\" },\r\n                        body: JSON.stringify({ storedToken })\r\n                    })\r\n                    const data = await res.json()\r\n                    dispatch({ type: \"LOG_OUT\", payload: data })\r\n                    localStorage.removeItem(\"signIn\")\r\n                    history.push('/login')\r\n                } catch (err) {\r\n                    console.log(err, err.msg)\r\n                }\r\n            } else if (data.refreshedUser) {\r\n                dispatch({ type: \"LOG_IN\", payload: data.refreshedUser })\r\n                localStorage.setItem(\"signIn\", JSON.stringify(data.refreshedUser))\r\n                let refreshedUser = JSON.parse(localStorage.getItem('signIn'))\r\n                history.push('/AdminDisplay')\r\n                try {\r\n                    const res = await fetch('http://localhost:1110/vacations/edit/admin/' + history.location.state.id, {\r\n                        method: \"PUT\",\r\n                        headers: { \"Content-Type\": \"application/json\", 'x-access_token': refreshedUser.access_token, 'refresh_token': refreshedUser.refresh_token },\r\n                        body: JSON.stringify({ image, name, price, startsFrom, endsAt, followers, moreInfo })\r\n                    })\r\n                    const data = await res.json()\r\n                    console.log(data)\r\n                    localStorage.setItem(\"signIn\", JSON.stringify(refreshedUser))\r\n                }\r\n                catch (err) {\r\n                    console.log(err, err.msg)\r\n                }\r\n            } else {\r\n                console.log(data.updatedDestination)\r\n                history.push('/AdminDisplay')\r\n                localStorage.setItem(\"signIn\", JSON.stringify(signedInUser))\r\n            }\r\n\r\n        } catch (err) {\r\n            console.log(err, err.msg)\r\n            history.push('/login')\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"addedit\">\r\n            <div className=\"form\">\r\n                <h3>Add/Edit destination here</h3>\r\n                <TextField onChange={e => setImage(e.target.value)} id=\"standard-required1\" label=\"Image\" value={image} />\r\n                <TextField onChange={e => setName(e.target.value)} id=\"standard-required2\" label=\"Name\" value={name} />\r\n                <TextField onChange={e => setPrice(e.target.value)} id=\"standard-required3\" label=\"Price\" value={price} />\r\n                <TextField onChange={e => setStartsFrom(e.target.value)} id=\"standard-required4\" label=\"Starts From\" value={startsFrom} />\r\n                <TextField onChange={e => setEndsAt(e.target.value)} id=\"standard-required5\" label=\"Ends At\" value={endsAt} />\r\n                <TextField onChange={e => setFollowers(e.target.value)} id=\"standard-required6\" label=\"Followers\" value={followers} />\r\n                <TextField onChange={e => setMoreInfo(e.target.value)} id=\"standard-required7\" label=\"More Info\" value={moreInfo} className='textfield' />\r\n                {history.location.state === undefined ? '' : history.location.state.type === \"addDestination\" ? (<Button onClick={addDestination} variant=\"contained\" color=\"primary\"\r\n                    disabled={!image || !name || !price || !startsFrom || !endsAt || !moreInfo}>\r\n                    ADD</Button>) : (<Button onClick={editDestination} variant=\"contained\" color=\"primary\" className=\"btn\">EDIT</Button>)}\r\n                <h4>Changed you'r mind? Return to your<Link to='/displayadmin'> Home page</Link></h4>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button';\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport './Header.css'\r\nexport default function Header() {\r\n\r\n    const history = useHistory()\r\n    console.log(history)\r\n\r\n    const dispatch = useDispatch()\r\n    const isLogged = useSelector(state => state.isLogged)\r\n    console.log(isLogged)\r\n    const logout = async () => {\r\n        try {\r\n            const storedToken = JSON.parse(localStorage.getItem(\"signIn\"))\r\n            localStorage.removeItem(\"signIn\")\r\n            const res = await fetch('http://localhost:1110/auth/logout', {\r\n                method: \"PUT\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ storedToken })\r\n            })\r\n            const data = await res.json()\r\n            dispatch({ type: \"LOG_OUT\", payload: data })\r\n            history.push('/home')\r\n        } catch (err) {\r\n            console.log(err,err.msg)\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"header\">\r\n            <div className=\"logo\"><img src=\"https://th.bing.com/th/id/R5613fb7a88d762eec6dfd16b0027d87b?rik=z4H%2bLA6pfEMZAQ&riu=http%3a%2f%2fthumbs.dreamstime.com%2ft%2ffrog-pilot-27196361.jpg&ehk=45q3U4E00cChSQ%2b6tUtXs6mAQDO7F598qFn%2fOMRp0p0%3d&risl=&pid=ImgRaw\" alt=\"logo\"/></div>\r\n            <div className =\"center\">\r\n                <h1>FROG THE TRAVELLER</h1>\r\n            </div>\r\n            <div className=\"logout\">\r\n               {JSON.parse(localStorage.getItem('signIn'))===null && !isLogged.id  ?(<h4>Welcome guest!</h4>) :  <Button onClick={logout} variant=\"contained\" color=\"primary\" >\r\n                    Log Out\r\n                </Button>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { VictoryBar, VictoryChart } from \"victory\";\r\nimport \"./Statistics.css\";\r\n\r\n\r\nexport default function Statistics() {\r\n    const dispatch = useDispatch()\r\n    const isLogged = useSelector(state => state.isLogged)\r\n    console.log(isLogged)\r\n\r\n    const [followedDestinations, setFollowedDestinations] = useState([])\r\n    const history = useHistory()\r\n\r\n\r\n    useEffect(() => {\r\n        if (JSON.parse(localStorage.getItem('signIn') === null || JSON.parse(localStorage.getItem('signIn')).role !== 'admin')) history.push('/login')\r\n        followedDestinationsStatistics()\r\n    }, [])\r\n    const followedDestinationsStatistics = async () => {\r\n        const signedInUser = JSON.parse(localStorage.getItem('signIn'))\r\n        try {\r\n            const res = await fetch('http://localhost:1110/vacations/followed', {\r\n                headers: { 'x-access_token': signedInUser.access_token, 'refresh_token': signedInUser.refresh_token }\r\n            })\r\n            const data = await res.json()\r\n            if (data === \"Please log in\") {\r\n                try {\r\n                    const storedToken = JSON.parse(localStorage.getItem(\"signIn\"))\r\n                    localStorage.removeItem(\"signIn\")\r\n                    const res = await fetch('http://localhost:1110/auth/logout', {\r\n                        method: \"PUT\",\r\n                        headers: { \"Content-Type\": \"application/json\" },\r\n                        body: JSON.stringify({ storedToken })\r\n                    })\r\n                    const data = await res.json()\r\n                    history.push('/login')\r\n                } catch (err) {\r\n                    console.log(err, err.msg)\r\n                }\r\n            } else if (data.refreshedUser) {\r\n                localStorage.setItem(\"signIn\", JSON.stringify(data.refreshedUser))\r\n                let refreshedUser = JSON.parse(localStorage.getItem('signIn'))\r\n                try {\r\n                    const res = await fetch('http://localhost:1110/vacations/followed', {\r\n                        headers: { 'x-access_token': refreshedUser.access_token, 'refresh_token': refreshedUser.refresh_token }\r\n                    })\r\n                    const data = await res.json()\r\n                    console.log(data)\r\n                    setFollowedDestinations(data.myDestinations)\r\n                    localStorage.setItem(\"signIn\", JSON.stringify(refreshedUser))\r\n                }\r\n                catch (err) {\r\n                    console.log(err, err.msg)\r\n                }\r\n            } else {\r\n                console.log(data)\r\n                setFollowedDestinations(data.myDestinations)\r\n                localStorage.setItem(\"signIn\", JSON.stringify(signedInUser))\r\n            }\r\n        } catch (err) {\r\n            console.log(err, err.msg)\r\n            history.push('/login')\r\n        }\r\n    }\r\n    const sortedFollowedDestinations = followedDestinations.sort(function (a, b) { return a.followers - b.followers })\r\n\r\n    return (\r\n        <div className=\"statistics\">\r\n\r\n            <h3>Followers Per Destination</h3>\r\n            <div className=\"chart\">\r\n                <VictoryChart\r\n                    domainPadding={20} width={450}>\r\n                    {sortedFollowedDestinations.map(destination =>\r\n                        <VictoryBar className='bar' key={destination.id} style={{\r\n                            paddingLeft: 5,\r\n                            data: destination.followers === 1 ? { fill: \"red\", width: 40 } :\r\n                                (destination.followers < 4 ? { fill: \"yellow\", width: 40, } : { fill: \"green\", width: 40 })\r\n                        }}\r\n                            data={[\r\n                                {\r\n                                    x: `ID: ${destination.id}\r\n                                 ${destination.name}`,\r\n                                    y: `${destination.followers}`\r\n                                }\r\n                            ]} />\r\n                    )}\r\n                </VictoryChart>\r\n                <h4><Link to='/displayadmin'>Admin page</Link></h4>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import './App.css';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom'\nimport Register from './components/Register';\nimport Login from './components/Login';\nimport DisplayGuest from './components/DisplayGuest'\nimport DisplayAdmin from './components/DisplayAdmin'\nimport AddEditFormAdmin from './components/AddEditFormAdmin'\nimport Header from './components/Header';\nimport Statistics from './components/Statistics';\n\n\nfunction App() {\n    return (< div className=\"App\" >\n        <Router >\n            <Header />\n            <Switch>\n                <Route path='/home' exact component={Login} />\n                <Route path='/register' component={Register} />\n                <Route path='/displayguest' component={DisplayGuest} />\n                <Route path='/displayadmin' component={DisplayAdmin} />\n                <Route path='/addeditformadmin' component={AddEditFormAdmin} />\n                <Route path='/statistics'  component={Statistics} />\n                <Redirect from=\"/\" to=\"/home\" />\n            </Switch> \n        </Router >\n    </div>\n    );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'react-redux'\nimport { createStore, combineReducers } from 'redux'\nimport { loginReducer } from './redux/reducers'\nimport { Provider } from 'react-redux'\nimport './index.css';\nimport App from './App';\n\nconst allReducers = combineReducers({\n\n    isLogged: loginReducer\n})\n\nconst store = createStore(allReducers, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\n\n\nReactDOM.render( < Provider store = { store } >\n    <App />\n    </Provider>,\n    document.getElementById('root')\n);"],"sourceRoot":""}