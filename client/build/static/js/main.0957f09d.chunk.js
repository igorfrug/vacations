(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{238:function(e,t,n){},239:function(e,t,n){},241:function(e,t,n){},246:function(e,t,n){},254:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){},359:function(e,t,n){"use strict";n.r(t);var a=n(3),s=n(0),r=n(21),o=n.n(r),c=n(16),i=n(93),l=n(27),d={},h=(n(238),n(239),n(36)),g=n(25),u=n(13),p=n.n(u),j=n(23),m=n(20),O=n(401),b=n(393);n(241);function f(){var e=Object(g.g)(),t=Object(s.useState)(""),n=Object(m.a)(t,2),r=n[0],o=n[1],c=Object(s.useState)(""),i=Object(m.a)(c,2),l=i[0],d=i[1],u=Object(s.useState)(""),f=Object(m.a)(u,2),x=f[0],v=f[1],S=Object(s.useState)(""),I=Object(m.a)(S,2),y=I[0],k=I[1],N=Object(s.useState)(""),_=Object(m.a)(N,2),w=_[0],J=(_[1],Object(s.useState)()),T=Object(m.a)(J,2),C=T[0],U=T[1],L=function(){var t=Object(j.a)(p.a.mark((function t(n){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:1110/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,surname:l,username:x,password:y,role:w})});case 3:return a=t.sent,t.next=6,a.json();case 6:(s=t.sent).msg?U(s):e.push("/"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),U(t.t0),console.log(t.t0,t.t0.msg);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"register",children:Object(a.jsxs)("div",{className:"register-form",children:[Object(a.jsx)(O.a,{required:!0,id:"standard-required-1",label:"NAME",onChange:function(e){return o(e.target.value)},value:r}),Object(a.jsx)(O.a,{required:!0,id:"standard-required-2",label:"SURNAME",onChange:function(e){return d(e.target.value)},value:l}),Object(a.jsx)(O.a,{required:!0,id:"standard-required-3",label:"USERNAME",onChange:function(e){return v(e.target.value)},value:x}),Object(a.jsx)(O.a,{required:!0,id:"standard-required-4",label:"PASSWORD",onChange:function(e){return k(e.target.value)},value:y}),Object(a.jsx)("div",{className:"btn-register"}),Object(a.jsx)(b.a,{onClick:L,variant:"contained",color:"primary",className:"btn-itself",children:"Register"}),Object(a.jsx)("div",{className:"msg-1",children:C?Object(a.jsx)("h3",{children:C.msg}):""}),Object(a.jsx)("div",{className:"msg-2",children:Object(a.jsxs)("h3",{children:["Already registered? Please,login ",Object(a.jsx)(h.b,{to:"/login",children:"here"})," "]})})]})})}n(246);function x(){var e=Object(c.b)(),t=Object(g.g)(),n=Object(s.useState)(""),r=Object(m.a)(n,2),o=r[0],i=r[1],l=Object(s.useState)(""),d=Object(m.a)(l,2),u=d[0],f=d[1],x=Object(s.useState)([]),v=Object(m.a)(x,2),S=v[0],I=v[1],y=Object(s.useRef)(!0);Object(s.useEffect)((function(){localStorage.signIn&&(_(),y.current=!1)}),[]);var k={},N=function(){var n=Object(j.a)(p.a.mark((function n(){var a,s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("http://localhost:1110/auth/login",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:u})});case 3:return a=n.sent,n.next=6,a.json();case 6:s=n.sent,console.log(s),k=s[0],console.log(k),e({type:"LOG_IN",payload:s[0]}),k.access_token&&"guest"===k.role?(localStorage.setItem("signIn",JSON.stringify(k)),t.push("/displayguest",{user:k})):k.access_token&&"admin"===k.role?(localStorage.setItem("signIn",JSON.stringify(k)),t.push("/displayadmin",{user:k})):I(s),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),console.log(n.t0,n.t0.msg);case 17:console.log(k);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(){return n.apply(this,arguments)}}(),_=function(){var n=Object(j.a)(p.a.mark((function n(){var a,s,r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=JSON.parse(localStorage.getItem("signIn")),n.prev=1,n.next=4,fetch("http://localhost:1110/auth/secret/"+a.id,{headers:{"x-access_token":a.access_token,refresh_token:a.refresh_token}});case 4:return s=n.sent,n.next=7,s.json();case 7:r=n.sent,I(r[0]),e({type:"LOG_IN",payload:r[0]}),k=r[0],console.log(k),k.access_token&&"guest"===k.role?(t.push("/displayguest",{user:k}),localStorage.setItem("signIn",JSON.stringify(k))):k.access_token&&"admin"===k.role?(t.push("/displayadmin",{user:k}),localStorage.setItem("signIn",JSON.stringify(k))):I(r),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(1),console.log(n.t0,n.t0.msg);case 18:case"end":return n.stop()}}),n,null,[[1,15]])})));return function(){return n.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"login",children:Object(a.jsxs)("div",{className:"login-form",children:[Object(a.jsx)(O.a,{required:!0,id:"standard-required-1",label:"USERNAME",onChange:function(e){return i(e.target.value)},value:o}),Object(a.jsx)(O.a,{required:!0,id:"standard-required-2",label:"PASSWORD",onChange:function(e){return f(e.target.value)},value:u}),Object(a.jsx)("div",{className:"btn-login",children:Object(a.jsx)(b.a,{onClick:N,variant:"contained",color:"primary",children:"LOGIN"})}),S?Object(a.jsx)("h3",{children:S.msg}):"",Object(a.jsxs)("h3",{children:["Don't have an account yet? Please ",Object(a.jsx)(h.b,{to:"/register",children:" register here"})]})]})})}var v=n(399),S=n(403),I=n(405),y=n(40),k=n.n(y),N=n(394),_=n(395),w=n(396),J=n(400),T=n(398),C=n(397),U=Object(N.a)({root:{maxWidth:400,minWidth:250},media:{height:150}});function L(e){var t=e.setHandleChange,n=e.id,s=e.image,r=e.name,o=e.price,i=e.startsFrom,d=e.endsAt,h=e.followers,g=e.moreInfo,u=(e.myDestinations,e.history),m=U(),O=Object(c.c)((function(e){return e.isLogged})),f=Object(c.b)(),x=function(){var e=Object(j.a)(p.a.mark((function e(n){var a,c,l,j,m,b,x,v,S,I,y;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O.id,c=n,l=JSON.parse(localStorage.getItem("signIn")),console.log(l),e.prev=4,e.next=7,fetch("http://localhost:1110/vacations/follow",{method:"POST",headers:{"Content-Type":"application/json","x-access_token":l.access_token,refresh_token:l.refresh_token},body:JSON.stringify({destinationId:c,image:s,name:r,price:o,startsFrom:i,endsAt:d,followers:h,moreInfo:g,userId:a})});case 7:return j=e.sent,e.next=10,j.json();case 10:if("Please log in"!==(m=e.sent)){e.next=30;break}return e.prev=12,b=JSON.parse(localStorage.getItem("signIn")),localStorage.removeItem("signIn"),e.next=17,fetch("http://localhost:1110/auth/logout",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({storedToken:b})});case 17:return x=e.sent,e.next=20,x.json();case 20:v=e.sent,f({type:"LOG_OUT",payload:v}),u.push("/login"),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(12),console.log(e.t0,e.t0.msg);case 28:e.next=55;break;case 30:if(!m.refreshedUser){e.next=52;break}return localStorage.setItem("signIn",JSON.stringify(m.refreshedUser)),S=JSON.parse(localStorage.getItem("signIn")),console.log(S),e.prev=34,e.next=37,fetch("http://localhost:1110/vacations/follow",{method:"POST",headers:{"Content-Type":"application/json","x-access_token":S.access_token,refresh_token:S.refresh_token},body:JSON.stringify({destinationId:c,image:s,name:r,price:o,startsFrom:i,endsAt:d,followers:h,moreInfo:g,userId:a})});case 37:return I=e.sent,e.next=40,I.json();case 40:y=e.sent,console.log(y),f({type:"FOLLOW",payload:y}),t(y.followedDestinations),localStorage.setItem("signIn",JSON.stringify(S)),e.next=50;break;case 47:e.prev=47,e.t1=e.catch(34),console.log(e.t1,e.t1.msg);case 50:e.next=55;break;case 52:f({type:"FOLLOW",payload:m}),t(m.followedDestinations),localStorage.setItem("signIn",JSON.stringify(l));case 55:e.next=60;break;case 57:e.prev=57,e.t2=e.catch(4),console.log(e.t2,e.t2.msg);case 60:case"end":return e.stop()}}),e,null,[[4,57],[12,25],[34,47]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)(_.a,{className:m.root,children:[Object(a.jsxs)(w.a,{children:[Object(a.jsx)(C.a,{className:m.media,image:s,title:r}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:r}),Object(a.jsxs)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:["Price: ",o]}),Object(a.jsxs)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:["Departure: ",i]}),Object(a.jsxs)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:["Return: ",d]}),Object(a.jsxs)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:["Followers: ",h]})]})]}),Object(a.jsxs)(J.a,{children:[Object(a.jsx)(k.a,{variant:"popover",popupId:"demo-popup-popover",children:function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(b.a,Object(l.a)(Object(l.a)({variant:"contained",color:"primary"},Object(y.bindTrigger)(e)),{},{children:"More Info"})),Object(a.jsx)(I.a,Object(l.a)(Object(l.a)({},Object(y.bindPopover)(e)),{},{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(a.jsx)(S.a,{p:2,children:Object(a.jsxs)(v.a,{children:[g,"."]})})}))]})}}),Object(a.jsx)(b.a,{onClick:function(e){return x(n)},variant:"contained",color:"primary",children:"Follow Me"})]})]})})}var E=Object(N.a)({root:{maxWidth:400,minWidth:250},media:{height:150}});function A(e){var t=e.setHandleChange,n=e.id,s=e.destination_id,r=e.image,o=e.name,i=e.price,d=e.startsFrom,h=e.endsAt,g=e.followers,u=e.moreInfo,m=e.history;console.log(n);var O=E(),f=(Object(c.c)((function(e){return e.isLogged})),Object(c.c)((function(e){return e.followMe})),Object(c.b)()),x=function(){var e=Object(j.a)(p.a.mark((function e(){var a,r,o,c,i,l,d,h,g;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("signIn")),e.prev=1,e.next=4,fetch("http://localhost:1110/vacations/"+a.id,{method:"DELETE",headers:{"Content-Type":"application/json","x-access_token":a.access_token,refresh_token:a.refresh_token},body:JSON.stringify({id:n,destination_id:s})});case 4:return r=e.sent,e.next=7,r.json();case 7:if("Please log in"!==(o=e.sent)){e.next=27;break}return e.prev=9,c=JSON.parse(localStorage.getItem("signIn")),localStorage.removeItem("signIn"),e.next=14,fetch("http://localhost:1110/auth/logout",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({storedToken:c})});case 14:return i=e.sent,e.next=17,i.json();case 17:l=e.sent,f({type:"LOG_OUT",payload:l}),m.push("/login"),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),console.log(e.t0,e.t0.msg);case 25:e.next=53;break;case 27:if(!o.refreshedUser){e.next=50;break}return console.log("refresh works"),localStorage.setItem("signIn",JSON.stringify(o.refreshedUser)),d=JSON.parse(localStorage.getItem("signIn")),console.log(d),e.prev=32,e.next=35,fetch("http://localhost:1110/vacations/"+d.id,{method:"DELETE",headers:{"Content-Type":"application/json","x-access_token":d.access_token,refresh_token:d.refresh_token},body:JSON.stringify({id:n,destination_id:s})});case 35:return h=e.sent,e.next=38,h.json();case 38:g=e.sent,console.log(g),f({type:"FOLLOW",payload:g}),t(g.followedDestinations),localStorage.setItem("signIn",JSON.stringify(d)),e.next=48;break;case 45:e.prev=45,e.t1=e.catch(32),console.log(e.t1,e.t1.msg);case 48:e.next=53;break;case 50:f({type:"FOLLOW",payload:o}),t(o.followedDestinations),localStorage.setItem("signIn",JSON.stringify(a));case 53:e.next=58;break;case 55:e.prev=55,e.t2=e.catch(1),console.log(e.t2,e.t2.msg);case 58:case"end":return e.stop()}}),e,null,[[1,55],[9,22],[32,45]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"followed-card",children:Object(a.jsxs)(_.a,{className:O.root,children:[Object(a.jsxs)(w.a,{children:[Object(a.jsx)(C.a,{className:O.media,image:r,title:o}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:o}),Object(a.jsxs)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:["Price: ",i]}),Object(a.jsxs)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:["Departure: ",d]}),Object(a.jsxs)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:["Return: ",h]}),Object(a.jsxs)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:["Follows: ",g]})]})]}),Object(a.jsxs)(J.a,{children:[Object(a.jsx)(k.a,{variant:"popover",popupId:"demo-popup-popover",children:function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(b.a,Object(l.a)(Object(l.a)({variant:"contained",color:"primary"},Object(y.bindTrigger)(e)),{},{children:"More Info"})),Object(a.jsx)(I.a,Object(l.a)(Object(l.a)({},Object(y.bindPopover)(e)),{},{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(a.jsx)(S.a,{p:2,children:Object(a.jsxs)(v.a,{children:[u,"."]})})}))]})}}),Object(a.jsx)(b.a,{onClick:function(e){return x(n)},variant:"contained",color:"primary",children:"Unfollow Me"})]})]})})}n(254);var D=Object(N.a)((function(e){return{root:{flexGrow:2},card:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary}}}));function P(e){var t=e.history,n=D();JSON.parse(null===localStorage.getItem("signIn")||"admin"===JSON.parse(localStorage.getItem("signIn")).role)&&t.push("/login");var r=Object(s.useState)([]),o=Object(m.a)(r,2),i=o[0],l=o[1],d=Object(s.useState)([]),h=Object(m.a)(d,2),g=h[0],u=h[1],O=Object(s.useState)([]),b=Object(m.a)(O,2),f=b[0],x=b[1],v=Object(c.b)(),S=Object(c.c)((function(e){return e.isLogged})),I=void 0===t.location.state?"":t.location.state.user;S.id||t.push("/login"),Object(s.useEffect)((function(){var e=!0;return e&&(y(),setTimeout((function(){k()}),50)),function(){e=!1}}),[f]);var y=function(){var e=Object(j.a)(p.a.mark((function e(){var n,a,s,r,o,c,i,d,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.getItem("signIn")),e.prev=1,e.next=4,fetch("http://localhost:1110/vacations/all/"+I.id,{headers:{"x-access_token":n.access_token,refresh_token:n.refresh_token}});case 4:return a=e.sent,e.next=7,a.json();case 7:if(s=e.sent,console.log(s),"Please log in"!==s){e.next=28;break}return e.prev=10,r=JSON.parse(localStorage.getItem("signIn")),localStorage.removeItem("signIn"),e.next=15,fetch("http://localhost:1110/auth/logout",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({storedToken:r})});case 15:return o=e.sent,e.next=18,o.json();case 18:c=e.sent,v({type:"LOG_OUT",payload:c}),t.push("/login"),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),console.log(e.t0,e.t0.msg);case 26:e.next=53;break;case 28:if(!s.refreshedUser){e.next=49;break}return localStorage.setItem("signIn",JSON.stringify(s.refreshedUser)),i=JSON.parse(localStorage.getItem("signIn")),e.prev=31,e.next=34,fetch("http://localhost:1110/vacations/all/"+I.id,{headers:{"x-access_token":i.access_token,refresh_token:i.refresh_token}});case 34:return d=e.sent,e.next=37,d.json();case 37:h=e.sent,console.log(h),l(h.destinations),console.log(h.destinations),localStorage.setItem("signIn",JSON.stringify(i)),e.next=47;break;case 44:e.prev=44,e.t1=e.catch(31),console.log(e.t1,e.t1.msg);case 47:e.next=53;break;case 49:l(s.destinations),console.log(s.destinations),console.log("No refresh"),localStorage.setItem("signIn",JSON.stringify(n));case 53:e.next=58;break;case 55:e.prev=55,e.t2=e.catch(1),console.log(e.t2,e.t2.msg);case 58:case"end":return e.stop()}}),e,null,[[1,55],[10,23],[31,44]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("signIn")),e.prev=1,e.next=4,fetch("http://localhost:1110/vacations/followed/"+I.id,{headers:{"x-access_token":t.access_token,refresh_token:t.refresh_token}});case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,u(a.myDestinations),localStorage.setItem("signIn",JSON.stringify(t)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0,e.t0.msg);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"display-guest",children:[Object(a.jsx)("div",{className:"fixed-headings",children:Object(a.jsxs)("h2",{className:"welcome",children:["WELCOME ",void 0===t.location.state?"":I.name.toUpperCase()]})}),Object(a.jsxs)("div",{className:"followed-cards",children:[Object(a.jsx)("div",{className:"favorite",children:g&&g.length>0?1===g.length?Object(a.jsx)("h2",{children:"Your favorite destination"}):Object(a.jsx)("h2",{children:"Your favorite destinations"}):""}),Object(a.jsx)("div",{className:"followed-grid",children:g?g.map((function(e){return Object(a.jsxs)("div",{className:"followed-card",children:[Object(a.jsx)(A,{id:e.id,destination_id:e.destination_id,image:e.image,name:e.name,price:e.price,startsFrom:e.starts_from,endsAt:e.ends_at,followers:e.followers,moreInfo:e.more_info,setHandleChange:x})," "]},e.id)})):""})]}),Object(a.jsx)("div",{className:"headings",children:i?1===i.length?Object(a.jsx)("h2",{className:"all",children:"Am I The Only One You Don't Like?"}):Object(a.jsx)("h2",{className:"all",children:"All Destinations"}):""}),Object(a.jsx)("div",{className:"display-cards",children:Object(a.jsx)("div",{className:n.root,children:Object(a.jsx)("div",{className:"grid",children:i?i.map((function(e){return Object(a.jsx)("div",{className:"card",children:Object(a.jsx)(L,{id:e.id,image:e.image,name:e.name,price:e.price,startsFrom:e.starts_from,endsAt:e.ends_at,followers:e.followers,moreInfo:e.more_info,myDestinations:g,setHandleChange:x})},e.id)})):""})})})]})}var F=Object(N.a)({root:{maxWidth:400,minWidth:250},media:{height:150}});function q(e){var t=e.id,n=e.image,s=e.name,r=e.price,o=e.startsFrom,i=e.endsAt,d=e.followers,h=e.moreInfo,g=e.history,u=e.setHandleChange,m=F(),O=Object(c.b)(),f=Object(c.c)((function(e){return e.isLogged}));console.log(f);var x=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,a,s,r,o,c,i,l,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.getItem("signIn")),e.prev=1,e.next=4,fetch("http://localhost:1110/vacations/delete/admin/"+t,{method:"DELETE",headers:{"x-access_token":n.access_token,refresh_token:n.refresh_token}});case 4:return a=e.sent,e.next=7,a.json();case 7:if("Please log in"!==(s=e.sent)){e.next=27;break}return e.prev=9,r=JSON.parse(localStorage.getItem("signIn")),localStorage.removeItem("signIn"),e.next=14,fetch("http://localhost:1110/auth/logout",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({storedToken:r})});case 14:return o=e.sent,e.next=17,o.json();case 17:c=e.sent,O({type:"LOG_OUT",payload:c}),g.push("/login"),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),console.log(e.t0,e.t0.msg);case 25:e.next=49;break;case 27:if(!s.refreshedUser){e.next=47;break}return O({type:"LOG_OUT",payload:s.refreshedUser}),localStorage.setItem("signIn",JSON.stringify(s.refreshedUser)),i=JSON.parse(localStorage.getItem("signIn")),e.prev=31,e.next=34,fetch("http://localhost:1110/vacations/delete/admin/"+t,{method:"DELETE",headers:{"x-access_token":i.access_token,refresh_token:i.refresh_token}});case 34:return l=e.sent,e.next=37,l.json();case 37:d=e.sent,u(d.destinations),localStorage.setItem("signIn",JSON.stringify(i)),e.next=45;break;case 42:e.prev=42,e.t1=e.catch(31),console.log(e.t1,e.t1.msg);case 45:e.next=49;break;case 47:u(s.destinations),localStorage.setItem("signIn",JSON.stringify(n));case 49:e.next=55;break;case 51:e.prev=51,e.t2=e.catch(1),console.log(e.t2,e.t2.msg),g.push("/login");case 55:case"end":return e.stop()}}),e,null,[[1,51],[9,22],[31,42]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{children:Object(a.jsxs)(_.a,{className:m.root,children:[Object(a.jsxs)(w.a,{children:[Object(a.jsx)(C.a,{className:m.media,image:n,title:s}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(v.a,{gutterBottom:!0,variant:"h6",component:"h5",children:s}),Object(a.jsxs)(v.a,{gutterBottom:!0,variant:"h6",component:"h5",children:["Price: ",r]}),Object(a.jsxs)(v.a,{gutterBottom:!0,variant:"h6",component:"h5",children:["Departure: ",o]}),Object(a.jsxs)(v.a,{gutterBottom:!0,variant:"h6",component:"h5",children:["Return: ",i]}),Object(a.jsxs)(v.a,{gutterBottom:!0,variant:"h6",component:"h5",children:["Followers: ",d]})]})]}),Object(a.jsxs)(J.a,{children:[Object(a.jsx)(k.a,{variant:"popover",popupId:"demo-popup-popover",children:function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(b.a,Object(l.a)(Object(l.a)({variant:"contained",color:"primary"},Object(y.bindTrigger)(e)),{},{children:"More Info"})),Object(a.jsx)(I.a,Object(l.a)(Object(l.a)({},Object(y.bindPopover)(e)),{},{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(a.jsx)(S.a,{p:2,children:Object(a.jsxs)(v.a,{children:[h,"."]})})}))]})}}),Object(a.jsx)(b.a,{onClick:function(e){return x(t)},variant:"contained",size:"small",color:"primary",children:"Delete"}),Object(a.jsx)(b.a,{onClick:function(e){return g.push("/AddEditFormAdmin",{type:"editDestination",id:t,image:n,name:s,price:r,startsFrom:o,endsAt:i,followers:d,moreInfo:h})},variant:"contained",size:"small",color:"primary",children:"EDIT"})]})]})})}n(255);function R(e){var t=e.history;JSON.parse(null===localStorage.getItem("signIn")||"admin"!==JSON.parse(localStorage.getItem("signIn")).role)&&t.push("/login");var n=Object(c.b)(),r=Object(c.c)((function(e){return e.isLogged}));console.log(r),r.id||t.push("/login");var o=Object(s.useState)([]),i=Object(m.a)(o,2),l=i[0],d=i[1],g=Object(s.useState)([]),u=Object(m.a)(g,2),O=u[0],f=u[1],x=Object(s.useRef)(!0);Object(s.useEffect)((function(){v(),x.current=!1}),[O]);var v=function(){var e=Object(j.a)(p.a.mark((function e(){var a,s,r,o,c,i,l,h,g;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("signIn")),e.prev=1,e.next=4,fetch("http://localhost:1110/vacations/admin",{headers:{"x-access_token":a.access_token,refresh_token:a.refresh_token}});case 4:return s=e.sent,e.next=7,s.json();case 7:if(r=e.sent,console.log(r),"Please log in"!==r){e.next=28;break}return e.prev=10,o=JSON.parse(localStorage.getItem("signIn")),localStorage.removeItem("signIn"),e.next=15,fetch("http://localhost:1110/auth/logout",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({storedToken:o})});case 15:return c=e.sent,e.next=18,c.json();case 18:i=e.sent,n({type:"LOG_OUT",payload:i}),t.push("/login"),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),console.log(e.t0,e.t0.msg);case 26:e.next=53;break;case 28:if(!r.refreshedUser){e.next=50;break}return n({type:"LOG_OUT",payload:r.refreshedUser}),console.log("refresh works"),localStorage.setItem("signIn",JSON.stringify(r.refreshedUser)),l=JSON.parse(localStorage.getItem("signIn")),e.prev=33,e.next=36,fetch("http://localhost:1110/vacations/admin",{headers:{"x-access_token":l.access_token,refresh_token:l.refresh_token}});case 36:return h=e.sent,e.next=39,h.json();case 39:g=e.sent,console.log(g),d(g.destinations),localStorage.setItem("signIn",JSON.stringify(l)),e.next=48;break;case 45:e.prev=45,e.t1=e.catch(33),console.log(e.t1,e.t1.msg);case 48:e.next=53;break;case 50:d(r.destinations),console.log("No refresh"),localStorage.setItem("signIn",JSON.stringify(a));case 53:e.next=59;break;case 55:e.prev=55,e.t2=e.catch(1),console.log(e.t2,e.t2.msg),t.push("/login");case 59:case"end":return e.stop()}}),e,null,[[1,55],[10,23],[33,45]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Welcome Admin"}),Object(a.jsx)("div",{className:"admin-cards",children:Object(a.jsx)("div",{className:"admin-grid",children:l.map((function(e){return Object(a.jsxs)("div",{className:"admin-card",children:[Object(a.jsx)(q,{id:e.id,image:e.image,name:e.name,price:e.price,startsFrom:e.starts_from,endsAt:e.ends_at,followers:e.followers,moreInfo:e.more_info,history:t,setHandleChange:f})," "]},e.id)}))})}),Object(a.jsx)(b.a,{onClick:function(){return t.push("/AddEditFormAdmin",{type:"addDestination",image:"",name:"",price:"",startsFrom:"",endsAt:"",followers:0,moreInfo:""})},variant:"contained",color:"primary",className:"add",children:"ADD DESTINATION"}),Object(a.jsxs)("h2",{children:["Statistics are ",Object(a.jsx)(h.b,{to:"/statistics",children:"HERE"})]})]})}n(256);function G(e){var t=e.history;JSON.parse(null===localStorage.getItem("signIn")||"admin"!==JSON.parse(localStorage.getItem("signIn")).role)&&t.push("/login"),console.log(t);var n=Object(c.b)(),r=Object(s.useState)(void 0===t.location.state?"":t.location.state.image),o=Object(m.a)(r,2),i=o[0],l=o[1],d=Object(s.useState)(void 0===t.location.state?"":t.location.state.name),g=Object(m.a)(d,2),u=g[0],f=g[1],x=Object(s.useState)(void 0===t.location.state?"":t.location.state.price),v=Object(m.a)(x,2),S=v[0],I=v[1],y=Object(s.useState)(void 0===t.location.state?"":t.location.state.startsFrom),k=Object(m.a)(y,2),N=k[0],_=k[1],w=Object(s.useState)(void 0===t.location.state?"":t.location.state.endsAt),J=Object(m.a)(w,2),T=J[0],C=J[1],U=Object(s.useState)(void 0===t.location.state?"":t.location.state.followers||0),L=Object(m.a)(U,2),E=L[0],A=L[1],D=Object(s.useState)(void 0===t.location.state?"":t.location.state.moreInfo),P=Object(m.a)(D,2),F=P[0],q=P[1];Object(c.c)((function(e){return e.isLogged})).id||t.push("/login");var R=function(){var e=Object(j.a)(p.a.mark((function e(){var a,s,r,o,c,l,d,h,g;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("signIn")),console.log(a),e.prev=2,e.next=5,fetch("http://localhost:1110/vacations/add",{method:"POST",headers:{"Content-Type":"application/json","x-access_token":a.access_token,refresh_token:a.refresh_token},body:JSON.stringify({image:i,name:u,price:S,startsFrom:N,endsAt:T,followers:E,moreInfo:F})});case 5:return s=e.sent,e.next=8,s.json();case 8:if("Please log in"!==(r=e.sent)){e.next=28;break}return e.prev=10,o=JSON.parse(localStorage.getItem("signIn")),localStorage.removeItem("signIn"),e.next=15,fetch("http://localhost:1110/auth/logout",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({storedToken:o})});case 15:return c=e.sent,e.next=18,c.json();case 18:l=e.sent,n({type:"LOG_OUT",payload:l}),t.push("/login"),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),console.log(e.t0,e.t0.msg);case 26:e.next=56;break;case 28:if(!r.refreshedUser){e.next=51;break}return n({type:"LOG_IN",payload:r.refreshedUser}),console.log("refresh works"),localStorage.setItem("signIn",JSON.stringify(r.refreshedUser)),d=JSON.parse(localStorage.getItem("signIn")),console.log(d),e.prev=34,e.next=37,fetch("http://localhost:1110/vacations/add",{method:"POST",headers:{"Content-Type":"application/json","x-access_token":d.access_token,refresh_token:d.refresh_token},body:JSON.stringify({image:i,name:u,price:S,startsFrom:N,endsAt:T,followers:E,moreInfo:F})});case 37:return h=e.sent,e.next=40,h.json();case 40:g=e.sent,console.log(g),t.push("/AdminDisplay"),localStorage.setItem("signIn",JSON.stringify(d)),e.next=49;break;case 46:e.prev=46,e.t1=e.catch(34),console.log(e.t1,e.t1.msg);case 49:e.next=56;break;case 51:n({type:"LOG_IN",payload:r}),console.log(r.newDestination),t.push("/AdminDisplay"),console.log("No refresh"),localStorage.setItem("signIn",JSON.stringify(a));case 56:e.next=61;break;case 58:e.prev=58,e.t2=e.catch(2),console.log(e.t2,e.t2.msg);case 61:case"end":return e.stop()}}),e,null,[[2,58],[10,23],[34,46]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(p.a.mark((function e(){var a,s,r,o,c,l,d,h,g;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.location.state.id),a=JSON.parse(localStorage.getItem("signIn")),e.prev=2,e.next=5,fetch("http://localhost:1110/vacations/edit/admin/"+t.location.state.id,{method:"PUT",headers:{"Content-Type":"application/json","x-access_token":a.access_token,refresh_token:a.refresh_token},body:JSON.stringify({image:i,name:u,price:S,startsFrom:N,endsAt:T,followers:E,moreInfo:F})});case 5:return s=e.sent,e.next=8,s.json();case 8:if("Please log in"!==(r=e.sent)){e.next=28;break}return e.prev=10,o=JSON.parse(localStorage.getItem("signIn")),e.next=14,fetch("http://localhost:1110/auth/logout",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({storedToken:o})});case 14:return c=e.sent,e.next=17,c.json();case 17:l=e.sent,n({type:"LOG_OUT",payload:l}),localStorage.removeItem("signIn"),t.push("/login"),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),console.log(e.t0,e.t0.msg);case 26:e.next=52;break;case 28:if(!r.refreshedUser){e.next=49;break}return n({type:"LOG_IN",payload:r.refreshedUser}),localStorage.setItem("signIn",JSON.stringify(r.refreshedUser)),d=JSON.parse(localStorage.getItem("signIn")),t.push("/AdminDisplay"),e.prev=33,e.next=36,fetch("http://localhost:1110/vacations/edit/admin/"+t.location.state.id,{method:"PUT",headers:{"Content-Type":"application/json","x-access_token":d.access_token,refresh_token:d.refresh_token},body:JSON.stringify({image:i,name:u,price:S,startsFrom:N,endsAt:T,followers:E,moreInfo:F})});case 36:return h=e.sent,e.next=39,h.json();case 39:g=e.sent,console.log(g),localStorage.setItem("signIn",JSON.stringify(d)),e.next=47;break;case 44:e.prev=44,e.t1=e.catch(33),console.log(e.t1,e.t1.msg);case 47:e.next=52;break;case 49:console.log(r.updatedDestination),t.push("/AdminDisplay"),localStorage.setItem("signIn",JSON.stringify(a));case 52:e.next=58;break;case 54:e.prev=54,e.t2=e.catch(2),console.log(e.t2,e.t2.msg),t.push("/login");case 58:case"end":return e.stop()}}),e,null,[[2,54],[10,23],[33,44]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"addedit",children:Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)("h3",{children:"Add/Edit destination here"}),Object(a.jsx)(O.a,{onChange:function(e){return l(e.target.value)},id:"standard-required1",label:"Image",value:i}),Object(a.jsx)(O.a,{onChange:function(e){return f(e.target.value)},id:"standard-required2",label:"Name",value:u}),Object(a.jsx)(O.a,{onChange:function(e){return I(e.target.value)},id:"standard-required3",label:"Price",value:S}),Object(a.jsx)(O.a,{onChange:function(e){return _(e.target.value)},id:"standard-required4",label:"Starts From",value:N}),Object(a.jsx)(O.a,{onChange:function(e){return C(e.target.value)},id:"standard-required5",label:"Ends At",value:T}),Object(a.jsx)(O.a,{onChange:function(e){return A(e.target.value)},id:"standard-required6",label:"Followers",value:E}),Object(a.jsx)(O.a,{onChange:function(e){return q(e.target.value)},id:"standard-required7",label:"More Info",value:F,className:"textfield"}),void 0===t.location.state?"":"addDestination"===t.location.state.type?Object(a.jsx)(b.a,{onClick:R,variant:"contained",color:"primary",disabled:!i||!u||!S||!N||!T||!F,children:"ADD"}):Object(a.jsx)(b.a,{onClick:G,variant:"contained",color:"primary",className:"btn",children:"EDIT"}),Object(a.jsxs)("h4",{children:["Changed you'r mind? Return to your",Object(a.jsx)(h.b,{to:"/displayadmin",children:" Home page"})]})]})})}n(257);function B(){var e=Object(g.g)();console.log(e);var t=Object(c.b)(),n=Object(c.c)((function(e){return e.isLogged}));console.log(n);var s=function(){var n=Object(j.a)(p.a.mark((function n(){var a,s,r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=JSON.parse(localStorage.getItem("signIn")),localStorage.removeItem("signIn"),n.next=5,fetch("http://localhost:1110/auth/logout",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({storedToken:a})});case 5:return s=n.sent,n.next=8,s.json();case 8:r=n.sent,t({type:"LOG_OUT",payload:r}),e.push("/home"),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),console.log(n.t0,n.t0.msg);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)("div",{className:"logo",children:Object(a.jsx)("img",{src:"https://th.bing.com/th/id/R5613fb7a88d762eec6dfd16b0027d87b?rik=z4H%2bLA6pfEMZAQ&riu=http%3a%2f%2fthumbs.dreamstime.com%2ft%2ffrog-pilot-27196361.jpg&ehk=45q3U4E00cChSQ%2b6tUtXs6mAQDO7F598qFn%2fOMRp0p0%3d&risl=&pid=ImgRaw",alt:"logo"})}),Object(a.jsx)("div",{className:"center",children:Object(a.jsx)("h1",{children:"FROG THE TRAVELLER"})}),Object(a.jsx)("div",{className:"logout",children:null!==JSON.parse(localStorage.getItem("signIn"))||n.id?Object(a.jsx)(b.a,{onClick:s,variant:"contained",color:"primary",children:"Log Out"}):Object(a.jsx)("h4",{children:"Welcome guest!"})})]})}var W=n(404),M=n(406);n(258);function H(){Object(c.b)();var e=Object(c.c)((function(e){return e.isLogged}));console.log(e);var t=Object(s.useState)([]),n=Object(m.a)(t,2),r=n[0],o=n[1],i=Object(g.g)();Object(s.useEffect)((function(){JSON.parse(null===localStorage.getItem("signIn")||"admin"!==JSON.parse(localStorage.getItem("signIn")).role)&&i.push("/login"),l()}),[]);var l=function(){var e=Object(j.a)(p.a.mark((function e(){var t,n,a,s,r,c,l,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("signIn")),e.prev=1,e.next=4,fetch("http://localhost:1110/vacations/followed",{headers:{"x-access_token":t.access_token,refresh_token:t.refresh_token}});case 4:return n=e.sent,e.next=7,n.json();case 7:if("Please log in"!==(a=e.sent)){e.next=26;break}return e.prev=9,s=JSON.parse(localStorage.getItem("signIn")),localStorage.removeItem("signIn"),e.next=14,fetch("http://localhost:1110/auth/logout",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({storedToken:s})});case 14:return r=e.sent,e.next=17,r.json();case 17:e.sent,i.push("/login"),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),console.log(e.t0,e.t0.msg);case 24:e.next=49;break;case 26:if(!a.refreshedUser){e.next=46;break}return localStorage.setItem("signIn",JSON.stringify(a.refreshedUser)),c=JSON.parse(localStorage.getItem("signIn")),e.prev=29,e.next=32,fetch("http://localhost:1110/vacations/followed",{headers:{"x-access_token":c.access_token,refresh_token:c.refresh_token}});case 32:return l=e.sent,e.next=35,l.json();case 35:d=e.sent,console.log(d),o(d.myDestinations),localStorage.setItem("signIn",JSON.stringify(c)),e.next=44;break;case 41:e.prev=41,e.t1=e.catch(29),console.log(e.t1,e.t1.msg);case 44:e.next=49;break;case 46:console.log(a),o(a.myDestinations),localStorage.setItem("signIn",JSON.stringify(t));case 49:e.next=55;break;case 51:e.prev=51,e.t2=e.catch(1),console.log(e.t2,e.t2.msg),i.push("/login");case 55:case"end":return e.stop()}}),e,null,[[1,51],[9,21],[29,41]])})));return function(){return e.apply(this,arguments)}}(),d=r.sort((function(e,t){return e.followers-t.followers}));return Object(a.jsxs)("div",{className:"statistics",children:[Object(a.jsx)("h3",{children:"Followers Per Destination"}),Object(a.jsxs)("div",{className:"chart",children:[Object(a.jsx)(W.a,{domainPadding:20,width:450,children:d.map((function(e){return Object(a.jsx)(M.a,{className:"bar",style:{paddingLeft:5,data:1===e.followers?{fill:"red",width:40}:e.followers<4?{fill:"yellow",width:40}:{fill:"green",width:40}},data:[{x:"ID: ".concat(e.id,"\n                                 ").concat(e.name),y:"".concat(e.followers)}]},e.id)}))}),Object(a.jsx)("h4",{children:Object(a.jsx)(h.b,{to:"/displayadmin",children:"Admin page"})})]})]})}var z=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(h.a,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(g.d,{children:[Object(a.jsx)(g.b,{path:"/home",exact:!0,component:x}),Object(a.jsx)(g.b,{path:"/register",component:f}),Object(a.jsx)(g.b,{path:"/displayguest",component:P}),Object(a.jsx)(g.b,{path:"/displayadmin",component:R}),Object(a.jsx)(g.b,{path:"/addeditformadmin",component:G}),Object(a.jsx)(g.b,{path:"/statistics",component:H}),Object(a.jsx)(g.a,{from:"/",to:"/home"})]})]})})},X=Object(i.b)({isLogged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":var n=t.payload,a=n.id,s=n.name,r=n.sur_name,o=n.role,c=n.username,i=n.password,h=n.signedIn,g=n.access_token,u=n.refresh_token;return Object(l.a)(Object(l.a)({},e),{},{id:a,name:s,sur_name:r,role:o,username:c,password:i,signedIn:h,access_token:g,refresh_token:u});case"LOG_OUT":return d;default:return e}}}),Q=Object(i.c)(X,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(Object(a.jsx)(c.a,{store:Q,children:Object(a.jsx)(z,{})}),document.getElementById("root"))}},[[359,1,2]]]);
//# sourceMappingURL=main.0957f09d.chunk.js.map